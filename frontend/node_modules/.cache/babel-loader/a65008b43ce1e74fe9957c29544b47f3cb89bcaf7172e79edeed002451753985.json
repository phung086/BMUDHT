{"ast":null,"code":"import _objectSpread from\"D:/BMUDHT/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useCallback,useEffect,useMemo,useState}from\"react\";import api from\"../services/api\";import LoaderOverlay from\"./LoaderOverlay\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DEFAULT_PAGE_SIZE=10;const columns={users:[{key:\"username\",label:\"Tài khoản\"},{key:\"email\",label:\"Email\"},{key:\"role\",label:\"Vai trò\"},{key:\"status\",label:\"Trạng thái\"},{key:\"balance\",label:\"Số dư\"}],transactions:[{key:\"id\",label:\"Mã giao dịch\"},{key:\"type\",label:\"Loại\"},{key:\"amount\",label:\"Số tiền\"},{key:\"status\",label:\"Trạng thái\"},{key:\"createdAt\",label:\"Thời gian\"},{key:\"fromUser\",label:\"Người gửi\"},{key:\"toUser\",label:\"Người nhận\"},{key:\"description\",label:\"Ghi chú\"}],logs:[{key:\"timestamp\",label:\"Thời gian\"},{key:\"username\",label:\"Tài khoản\"},{key:\"action\",label:\"Hành động\"},{key:\"ipAddress\",label:\"Địa chỉ IP\"},{key:\"details\",label:\"Chi tiết\"}]};const AdminDashboard=_ref=>{let{onLogout}=_ref;const[selectedTab,setSelectedTab]=useState(\"users\");const[users,setUsers]=useState([]);const[transactions,setTransactions]=useState([]);const[logs,setLogs]=useState([]);const[summary,setSummary]=useState(null);const[summaryLoading,setSummaryLoading]=useState(false);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[page,setPage]=useState(1);const[total,setTotal]=useState(0);const[filters,setFilters]=useState({search:\"\",status:\"all\"});const activeData=useMemo(()=>{switch(selectedTab){case\"transactions\":return transactions;case\"logs\":return logs;case\"users\":default:return users;}},[selectedTab,users,transactions,logs]);const activeColumns=columns[selectedTab];const fetchData=useCallback(async()=>{setLoading(true);setError(null);const params={page,limit:DEFAULT_PAGE_SIZE};const trimmedSearch=filters.search.trim();if(trimmedSearch.length>0){params.search=trimmedSearch;}if(filters.status!==\"all\"){if(selectedTab===\"users\"&&[\"active\",\"locked\"].includes(filters.status)){params.status=filters.status;}if(selectedTab===\"transactions\"&&[\"pending\",\"completed\",\"failed\"].includes(filters.status)){params.status=filters.status;}}try{if(selectedTab===\"users\"){var _res$data,_res$data2;const res=await api.get(\"/api/admin/users\",{params});setUsers(((_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.users)||[]);setTotal(((_res$data2=res.data)===null||_res$data2===void 0?void 0:_res$data2.total)||0);}else if(selectedTab===\"transactions\"){var _res$data3,_res$data4;const res=await api.get(\"/api/admin/transactions\",{params});setTransactions(((_res$data3=res.data)===null||_res$data3===void 0?void 0:_res$data3.transactions)||[]);setTotal(((_res$data4=res.data)===null||_res$data4===void 0?void 0:_res$data4.total)||0);}else{var _res$data5,_res$data6;const res=await api.get(\"/api/admin/audit\",{params});setLogs(((_res$data5=res.data)===null||_res$data5===void 0?void 0:_res$data5.logs)||[]);setTotal(((_res$data6=res.data)===null||_res$data6===void 0?void 0:_res$data6.total)||0);}}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||\"Không thể tải dữ liệu quản trị. Vui lòng thử lại.\");}finally{setLoading(false);}},[filters.search,filters.status,page,selectedTab]);const loadSummary=useCallback(async()=>{setSummaryLoading(true);try{const res=await api.get(\"/api/admin/summary\");setSummary(res.data||null);}catch(err){console.error(\"Không thể tải tổng quan quản trị:\",err);}finally{setSummaryLoading(false);}},[]);useEffect(()=>{loadSummary();},[loadSummary]);useEffect(()=>{const timer=setTimeout(()=>{fetchData();},250);return()=>clearTimeout(timer);},[fetchData]);const handleSearch=event=>{const value=event.target.value;setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{search:value}));setPage(1);};const handleStatusChange=event=>{setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{status:event.target.value}));setPage(1);};const statusOptions=useMemo(()=>{if(selectedTab===\"users\"){return[{value:\"all\",label:\"Tất cả trạng thái\"},{value:\"active\",label:\"Hoạt động\"},{value:\"locked\",label:\"Đã khóa\"}];}if(selectedTab===\"transactions\"){return[{value:\"all\",label:\"Tất cả trạng thái\"},{value:\"pending\",label:\"Đang xử lý\"},{value:\"completed\",label:\"Hoàn thành\"},{value:\"failed\",label:\"Thất bại\"}];}return[{value:\"all\",label:\"Tất cả\"}];},[selectedTab]);const formatCell=(column,row)=>{const{key}=column;const value=row[key];if(value===null||value===undefined||value===\"\")return\"-\";if(key===\"amount\"||key===\"balance\"){return Number(value||0).toLocaleString(\"vi-VN\",{style:\"currency\",currency:\"VND\",minimumFractionDigits:key===\"balance\"?0:0});}if(key===\"createdAt\"||key===\"timestamp\"){return new Date(value).toLocaleString(\"vi-VN\",{hour:\"2-digit\",minute:\"2-digit\",day:\"2-digit\",month:\"2-digit\",year:\"numeric\"});}if(key===\"status\"){if(selectedTab===\"users\"){const isLocked=value===\"locked\";const label=isLocked?\"Đã khóa\":\"Hoạt động\";const tone=isLocked?\"danger\":\"success\";return/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-\".concat(tone,\"-subtle text-\").concat(tone),children:label});}const mapping={completed:{label:\"Hoàn thành\",tone:\"success\"},pending:{label:\"Đang xử lý\",tone:\"warning\"},failed:{label:\"Thất bại\",tone:\"danger\"}};const meta=mapping[value]||{label:value,tone:\"secondary\"};return/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-\".concat(meta.tone,\"-subtle text-\").concat(meta.tone),children:meta.label});}if(key===\"role\"){return value===\"admin\"?\"Quản trị viên\":\"Người dùng\";}if(key===\"type\"){const labels={transfer:\"Chuyển khoản\",deposit:\"Nạp tiền\",withdraw:\"Rút tiền\"};return labels[value]||value;}if(key===\"details\"||key===\"description\"){return/*#__PURE__*/_jsx(\"span\",{className:\"admin-dashboard__truncate\",title:value,children:value});}if(key===\"username\"&&selectedTab===\"logs\"){return value||\"Ẩn danh\";}return value;};const handleRefresh=()=>{loadSummary();fetchData();};const summaryCards=useMemo(()=>{if(!summary)return[];const formatNumber=val=>Number(val||0).toLocaleString(\"vi-VN\");const volume=Number(summary.totalVolume||0).toLocaleString(\"vi-VN\",{style:\"currency\",currency:\"VND\",minimumFractionDigits:0});return[{title:\"Tổng người dùng\",value:formatNumber(summary.totalUsers),caption:\"\".concat(formatNumber(summary.adminUsers),\" t\\xE0i kho\\u1EA3n qu\\u1EA3n tr\\u1ECB\"),icon:\"bi-people-fill\",tone:\"primary\"},{title:\"Tài khoản bị khóa\",value:formatNumber(summary.lockedUsers),caption:\"Theo dõi đăng nhập bất thường\",icon:\"bi-shield-lock-fill\",tone:\"danger\"},{title:\"Giao dịch hoàn tất\",value:formatNumber(summary.completedTransactions),caption:\"\".concat(formatNumber(summary.totalTransactions),\" giao d\\u1ECBch to\\xE0n h\\u1EC7 th\\u1ED1ng\"),icon:\"bi-arrow-left-right\",tone:\"success\"},{title:\"Doanh số lũy kế\",value:volume,caption:\"\".concat(formatNumber(summary.pendingTransactions),\" \\u0111ang x\\u1EED l\\xFD, \").concat(formatNumber(summary.failedTransactions),\" th\\u1EA5t b\\u1EA1i\"),icon:\"bi-cash-stack\",tone:\"info\"}];},[summary]);return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-dashboard-page\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"admin-dashboard__header\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"admin-dashboard__title\",children:\"B\\u1EA3ng \\u0111i\\u1EC1u khi\\u1EC3n qu\\u1EA3n tr\\u1ECB\"}),/*#__PURE__*/_jsx(\"p\",{className:\"admin-dashboard__subtitle\",children:\"Theo d\\xF5i ho\\u1EA1t \\u0111\\u1ED9ng ng\\u01B0\\u1EDDi d\\xF9ng, giao d\\u1ECBch v\\xE0 nh\\u1EADt k\\xFD b\\u1EA3o m\\u1EADt trong th\\u1EDDi gian th\\u1EF1c.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-dashboard__actions\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-light\",onClick:handleRefresh,children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-arrow-repeat me-2\",\"aria-hidden\":true}),\"L\\xE0m m\\u1EDBi\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-danger\",onClick:onLogout,children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-box-arrow-right me-2\",\"aria-hidden\":true}),\"\\u0110\\u0103ng xu\\u1EA5t\"]})]})]}),summaryCards.length>0&&/*#__PURE__*/_jsx(\"section\",{className:\"admin-dashboard__summary\",children:summaryCards.map(card=>/*#__PURE__*/_jsxs(\"article\",{className:\"admin-summary-card admin-summary-card--\".concat(card.tone,\" \").concat(summaryLoading?\"is-loading\":\"\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"admin-summary-card__icon\",\"aria-hidden\":true,children:/*#__PURE__*/_jsx(\"i\",{className:\"bi \".concat(card.icon)})}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-summary-card__body\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"admin-summary-card__title\",children:card.title}),/*#__PURE__*/_jsx(\"p\",{className:\"admin-summary-card__value\",children:card.value}),/*#__PURE__*/_jsx(\"p\",{className:\"admin-summary-card__caption\",children:card.caption})]})]},card.title))}),/*#__PURE__*/_jsxs(\"nav\",{className:\"admin-dashboard__tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"admin-dashboard__tab \".concat(selectedTab===\"users\"?\"is-active\":\"\"),onClick:()=>{setSelectedTab(\"users\");setPage(1);setFilters({search:\"\",status:\"all\"});},children:\"Ng\\u01B0\\u1EDDi d\\xF9ng\"}),/*#__PURE__*/_jsx(\"button\",{className:\"admin-dashboard__tab \".concat(selectedTab===\"transactions\"?\"is-active\":\"\"),onClick:()=>{setSelectedTab(\"transactions\");setPage(1);setFilters({search:\"\",status:\"all\"});},children:\"Giao d\\u1ECBch\"}),/*#__PURE__*/_jsx(\"button\",{className:\"admin-dashboard__tab \".concat(selectedTab===\"logs\"?\"is-active\":\"\"),onClick:()=>{setSelectedTab(\"logs\");setPage(1);setFilters({search:\"\",status:\"all\"});},children:\"Nh\\u1EADt k\\xFD b\\u1EA3o m\\u1EADt\"})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"admin-dashboard__filters\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"adminSearch\",className:\"form-control\",placeholder:\"T\\xECm ki\\u1EBFm\",value:filters.search,onChange:handleSearch}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"adminSearch\",children:\"T\\xECm ki\\u1EBFm\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating\",children:[/*#__PURE__*/_jsx(\"select\",{id:\"adminStatus\",className:\"form-select\",value:filters.status,onChange:handleStatusChange,disabled:statusOptions.length===1,children:statusOptions.map(option=>/*#__PURE__*/_jsx(\"option\",{value:option.value,children:option.label},option.value))}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"adminStatus\",children:\"Tr\\u1EA1ng th\\xE1i\"})]})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-exclamation-triangle-fill me-2\",\"aria-hidden\":true}),error]}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-dashboard__table card shadow-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table align-middle\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:activeColumns.map(column=>/*#__PURE__*/_jsx(\"th\",{children:column.label},column.key))})}),/*#__PURE__*/_jsx(\"tbody\",{children:activeData.length===0?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:activeColumns.length,className:\"text-center text-muted py-4\",children:\"Kh\\xF4ng c\\xF3 d\\u1EEF li\\u1EC7u.\"})}):activeData.map((row,index)=>/*#__PURE__*/_jsx(\"tr\",{children:activeColumns.map(column=>/*#__PURE__*/_jsx(\"td\",{children:formatCell(column,row)},column.key))},row.id||row.timestamp||index))})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-dashboard__pagination\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Trang \",page,\" / \",Math.max(1,Math.ceil(total/DEFAULT_PAGE_SIZE))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"btn-group\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-primary\",onClick:()=>setPage(prev=>Math.max(1,prev-1)),disabled:page===1,children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-chevron-left\",\"aria-hidden\":true})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-primary\",onClick:()=>setPage(prev=>prev*DEFAULT_PAGE_SIZE>=total?prev:prev+1),disabled:page*DEFAULT_PAGE_SIZE>=total,children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-chevron-right\",\"aria-hidden\":true})})]})]})]}),loading&&/*#__PURE__*/_jsx(LoaderOverlay,{message:\"\\u0110ang t\\u1EA3i d\\u1EEF li\\u1EC7u qu\\u1EA3n tr\\u1ECB...\"})]});};export default AdminDashboard;","map":{"version":3,"names":["React","useCallback","useEffect","useMemo","useState","api","LoaderOverlay","jsx","_jsx","jsxs","_jsxs","DEFAULT_PAGE_SIZE","columns","users","key","label","transactions","logs","AdminDashboard","_ref","onLogout","selectedTab","setSelectedTab","setUsers","setTransactions","setLogs","summary","setSummary","summaryLoading","setSummaryLoading","loading","setLoading","error","setError","page","setPage","total","setTotal","filters","setFilters","search","status","activeData","activeColumns","fetchData","params","limit","trimmedSearch","trim","length","includes","_res$data","_res$data2","res","get","data","_res$data3","_res$data4","_res$data5","_res$data6","err","_err$response","_err$response$data","response","loadSummary","console","timer","setTimeout","clearTimeout","handleSearch","event","value","target","prev","_objectSpread","handleStatusChange","statusOptions","formatCell","column","row","undefined","Number","toLocaleString","style","currency","minimumFractionDigits","Date","hour","minute","day","month","year","isLocked","tone","className","concat","children","mapping","completed","pending","failed","meta","labels","transfer","deposit","withdraw","title","handleRefresh","summaryCards","formatNumber","val","volume","totalVolume","totalUsers","caption","adminUsers","icon","lockedUsers","completedTransactions","totalTransactions","pendingTransactions","failedTransactions","onClick","map","card","id","placeholder","onChange","htmlFor","disabled","option","role","colSpan","index","timestamp","Math","max","ceil","message"],"sources":["D:/BMUDHT/frontend/src/components/AdminDashboard.js"],"sourcesContent":["import React, { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport api from \"../services/api\";\r\nimport LoaderOverlay from \"./LoaderOverlay\";\r\n\r\nconst DEFAULT_PAGE_SIZE = 10;\r\n\r\nconst columns = {\r\n  users: [\r\n    { key: \"username\", label: \"Tài khoản\" },\r\n    { key: \"email\", label: \"Email\" },\r\n    { key: \"role\", label: \"Vai trò\" },\r\n    { key: \"status\", label: \"Trạng thái\" },\r\n    { key: \"balance\", label: \"Số dư\" },\r\n  ],\r\n  transactions: [\r\n    { key: \"id\", label: \"Mã giao dịch\" },\r\n    { key: \"type\", label: \"Loại\" },\r\n    { key: \"amount\", label: \"Số tiền\" },\r\n    { key: \"status\", label: \"Trạng thái\" },\r\n    { key: \"createdAt\", label: \"Thời gian\" },\r\n    { key: \"fromUser\", label: \"Người gửi\" },\r\n    { key: \"toUser\", label: \"Người nhận\" },\r\n    { key: \"description\", label: \"Ghi chú\" },\r\n  ],\r\n  logs: [\r\n    { key: \"timestamp\", label: \"Thời gian\" },\r\n    { key: \"username\", label: \"Tài khoản\" },\r\n    { key: \"action\", label: \"Hành động\" },\r\n    { key: \"ipAddress\", label: \"Địa chỉ IP\" },\r\n    { key: \"details\", label: \"Chi tiết\" },\r\n  ],\r\n};\r\n\r\nconst AdminDashboard = ({ onLogout }) => {\r\n  const [selectedTab, setSelectedTab] = useState(\"users\");\r\n  const [users, setUsers] = useState([]);\r\n  const [transactions, setTransactions] = useState([]);\r\n  const [logs, setLogs] = useState([]);\r\n  const [summary, setSummary] = useState(null);\r\n  const [summaryLoading, setSummaryLoading] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [page, setPage] = useState(1);\r\n  const [total, setTotal] = useState(0);\r\n  const [filters, setFilters] = useState({ search: \"\", status: \"all\" });\r\n\r\n  const activeData = useMemo(() => {\r\n    switch (selectedTab) {\r\n      case \"transactions\":\r\n        return transactions;\r\n      case \"logs\":\r\n        return logs;\r\n      case \"users\":\r\n      default:\r\n        return users;\r\n    }\r\n  }, [selectedTab, users, transactions, logs]);\r\n\r\n  const activeColumns = columns[selectedTab];\r\n\r\n  const fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    const params = {\r\n      page,\r\n      limit: DEFAULT_PAGE_SIZE,\r\n    };\r\n\r\n    const trimmedSearch = filters.search.trim();\r\n    if (trimmedSearch.length > 0) {\r\n      params.search = trimmedSearch;\r\n    }\r\n\r\n    if (filters.status !== \"all\") {\r\n      if (\r\n        selectedTab === \"users\" &&\r\n        [\"active\", \"locked\"].includes(filters.status)\r\n      ) {\r\n        params.status = filters.status;\r\n      }\r\n      if (\r\n        selectedTab === \"transactions\" &&\r\n        [\"pending\", \"completed\", \"failed\"].includes(filters.status)\r\n      ) {\r\n        params.status = filters.status;\r\n      }\r\n    }\r\n\r\n    try {\r\n      if (selectedTab === \"users\") {\r\n        const res = await api.get(\"/api/admin/users\", { params });\r\n        setUsers(res.data?.users || []);\r\n        setTotal(res.data?.total || 0);\r\n      } else if (selectedTab === \"transactions\") {\r\n        const res = await api.get(\"/api/admin/transactions\", { params });\r\n        setTransactions(res.data?.transactions || []);\r\n        setTotal(res.data?.total || 0);\r\n      } else {\r\n        const res = await api.get(\"/api/admin/audit\", { params });\r\n        setLogs(res.data?.logs || []);\r\n        setTotal(res.data?.total || 0);\r\n      }\r\n    } catch (err) {\r\n      setError(\r\n        err.response?.data?.error ||\r\n          \"Không thể tải dữ liệu quản trị. Vui lòng thử lại.\"\r\n      );\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [filters.search, filters.status, page, selectedTab]);\r\n\r\n  const loadSummary = useCallback(async () => {\r\n    setSummaryLoading(true);\r\n    try {\r\n      const res = await api.get(\"/api/admin/summary\");\r\n      setSummary(res.data || null);\r\n    } catch (err) {\r\n      console.error(\"Không thể tải tổng quan quản trị:\", err);\r\n    } finally {\r\n      setSummaryLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    loadSummary();\r\n  }, [loadSummary]);\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      fetchData();\r\n    }, 250);\r\n\r\n    return () => clearTimeout(timer);\r\n  }, [fetchData]);\r\n\r\n  const handleSearch = (event) => {\r\n    const value = event.target.value;\r\n    setFilters((prev) => ({ ...prev, search: value }));\r\n    setPage(1);\r\n  };\r\n\r\n  const handleStatusChange = (event) => {\r\n    setFilters((prev) => ({ ...prev, status: event.target.value }));\r\n    setPage(1);\r\n  };\r\n\r\n  const statusOptions = useMemo(() => {\r\n    if (selectedTab === \"users\") {\r\n      return [\r\n        { value: \"all\", label: \"Tất cả trạng thái\" },\r\n        { value: \"active\", label: \"Hoạt động\" },\r\n        { value: \"locked\", label: \"Đã khóa\" },\r\n      ];\r\n    }\r\n    if (selectedTab === \"transactions\") {\r\n      return [\r\n        { value: \"all\", label: \"Tất cả trạng thái\" },\r\n        { value: \"pending\", label: \"Đang xử lý\" },\r\n        { value: \"completed\", label: \"Hoàn thành\" },\r\n        { value: \"failed\", label: \"Thất bại\" },\r\n      ];\r\n    }\r\n    return [{ value: \"all\", label: \"Tất cả\" }];\r\n  }, [selectedTab]);\r\n\r\n  const formatCell = (column, row) => {\r\n    const { key } = column;\r\n    const value = row[key];\r\n    if (value === null || value === undefined || value === \"\") return \"-\";\r\n\r\n    if (key === \"amount\" || key === \"balance\") {\r\n      return Number(value || 0).toLocaleString(\"vi-VN\", {\r\n        style: \"currency\",\r\n        currency: \"VND\",\r\n        minimumFractionDigits: key === \"balance\" ? 0 : 0,\r\n      });\r\n    }\r\n\r\n    if (key === \"createdAt\" || key === \"timestamp\") {\r\n      return new Date(value).toLocaleString(\"vi-VN\", {\r\n        hour: \"2-digit\",\r\n        minute: \"2-digit\",\r\n        day: \"2-digit\",\r\n        month: \"2-digit\",\r\n        year: \"numeric\",\r\n      });\r\n    }\r\n\r\n    if (key === \"status\") {\r\n      if (selectedTab === \"users\") {\r\n        const isLocked = value === \"locked\";\r\n        const label = isLocked ? \"Đã khóa\" : \"Hoạt động\";\r\n        const tone = isLocked ? \"danger\" : \"success\";\r\n        return (\r\n          <span className={`badge bg-${tone}-subtle text-${tone}`}>\r\n            {label}\r\n          </span>\r\n        );\r\n      }\r\n\r\n      const mapping = {\r\n        completed: { label: \"Hoàn thành\", tone: \"success\" },\r\n        pending: { label: \"Đang xử lý\", tone: \"warning\" },\r\n        failed: { label: \"Thất bại\", tone: \"danger\" },\r\n      };\r\n      const meta = mapping[value] || { label: value, tone: \"secondary\" };\r\n      return (\r\n        <span className={`badge bg-${meta.tone}-subtle text-${meta.tone}`}>\r\n          {meta.label}\r\n        </span>\r\n      );\r\n    }\r\n\r\n    if (key === \"role\") {\r\n      return value === \"admin\" ? \"Quản trị viên\" : \"Người dùng\";\r\n    }\r\n\r\n    if (key === \"type\") {\r\n      const labels = {\r\n        transfer: \"Chuyển khoản\",\r\n        deposit: \"Nạp tiền\",\r\n        withdraw: \"Rút tiền\",\r\n      };\r\n      return labels[value] || value;\r\n    }\r\n\r\n    if (key === \"details\" || key === \"description\") {\r\n      return (\r\n        <span className=\"admin-dashboard__truncate\" title={value}>\r\n          {value}\r\n        </span>\r\n      );\r\n    }\r\n\r\n    if (key === \"username\" && selectedTab === \"logs\") {\r\n      return value || \"Ẩn danh\";\r\n    }\r\n\r\n    return value;\r\n  };\r\n\r\n  const handleRefresh = () => {\r\n    loadSummary();\r\n    fetchData();\r\n  };\r\n\r\n  const summaryCards = useMemo(() => {\r\n    if (!summary) return [];\r\n    const formatNumber = (val) => Number(val || 0).toLocaleString(\"vi-VN\");\r\n    const volume = Number(summary.totalVolume || 0).toLocaleString(\"vi-VN\", {\r\n      style: \"currency\",\r\n      currency: \"VND\",\r\n      minimumFractionDigits: 0,\r\n    });\r\n\r\n    return [\r\n      {\r\n        title: \"Tổng người dùng\",\r\n        value: formatNumber(summary.totalUsers),\r\n        caption: `${formatNumber(summary.adminUsers)} tài khoản quản trị`,\r\n        icon: \"bi-people-fill\",\r\n        tone: \"primary\",\r\n      },\r\n      {\r\n        title: \"Tài khoản bị khóa\",\r\n        value: formatNumber(summary.lockedUsers),\r\n        caption: \"Theo dõi đăng nhập bất thường\",\r\n        icon: \"bi-shield-lock-fill\",\r\n        tone: \"danger\",\r\n      },\r\n      {\r\n        title: \"Giao dịch hoàn tất\",\r\n        value: formatNumber(summary.completedTransactions),\r\n        caption: `${formatNumber(\r\n          summary.totalTransactions\r\n        )} giao dịch toàn hệ thống`,\r\n        icon: \"bi-arrow-left-right\",\r\n        tone: \"success\",\r\n      },\r\n      {\r\n        title: \"Doanh số lũy kế\",\r\n        value: volume,\r\n        caption: `${formatNumber(\r\n          summary.pendingTransactions\r\n        )} đang xử lý, ${formatNumber(summary.failedTransactions)} thất bại`,\r\n        icon: \"bi-cash-stack\",\r\n        tone: \"info\",\r\n      },\r\n    ];\r\n  }, [summary]);\r\n\r\n  return (\r\n    <div className=\"admin-dashboard-page\">\r\n      <header className=\"admin-dashboard__header\">\r\n        <div>\r\n          <h1 className=\"admin-dashboard__title\">Bảng điều khiển quản trị</h1>\r\n          <p className=\"admin-dashboard__subtitle\">\r\n            Theo dõi hoạt động người dùng, giao dịch và nhật ký bảo mật trong\r\n            thời gian thực.\r\n          </p>\r\n        </div>\r\n        <div className=\"admin-dashboard__actions\">\r\n          <button className=\"btn btn-light\" onClick={handleRefresh}>\r\n            <i className=\"bi bi-arrow-repeat me-2\" aria-hidden></i>\r\n            Làm mới\r\n          </button>\r\n          <button className=\"btn btn-outline-danger\" onClick={onLogout}>\r\n            <i className=\"bi bi-box-arrow-right me-2\" aria-hidden></i>\r\n            Đăng xuất\r\n          </button>\r\n        </div>\r\n      </header>\r\n\r\n      {summaryCards.length > 0 && (\r\n        <section className=\"admin-dashboard__summary\">\r\n          {summaryCards.map((card) => (\r\n            <article\r\n              key={card.title}\r\n              className={`admin-summary-card admin-summary-card--${card.tone} ${\r\n                summaryLoading ? \"is-loading\" : \"\"\r\n              }`}\r\n            >\r\n              <div className=\"admin-summary-card__icon\" aria-hidden>\r\n                <i className={`bi ${card.icon}`}></i>\r\n              </div>\r\n              <div className=\"admin-summary-card__body\">\r\n                <p className=\"admin-summary-card__title\">{card.title}</p>\r\n                <p className=\"admin-summary-card__value\">{card.value}</p>\r\n                <p className=\"admin-summary-card__caption\">{card.caption}</p>\r\n              </div>\r\n            </article>\r\n          ))}\r\n        </section>\r\n      )}\r\n\r\n      <nav className=\"admin-dashboard__tabs\">\r\n        <button\r\n          className={`admin-dashboard__tab ${\r\n            selectedTab === \"users\" ? \"is-active\" : \"\"\r\n          }`}\r\n          onClick={() => {\r\n            setSelectedTab(\"users\");\r\n            setPage(1);\r\n            setFilters({ search: \"\", status: \"all\" });\r\n          }}\r\n        >\r\n          Người dùng\r\n        </button>\r\n        <button\r\n          className={`admin-dashboard__tab ${\r\n            selectedTab === \"transactions\" ? \"is-active\" : \"\"\r\n          }`}\r\n          onClick={() => {\r\n            setSelectedTab(\"transactions\");\r\n            setPage(1);\r\n            setFilters({ search: \"\", status: \"all\" });\r\n          }}\r\n        >\r\n          Giao dịch\r\n        </button>\r\n        <button\r\n          className={`admin-dashboard__tab ${\r\n            selectedTab === \"logs\" ? \"is-active\" : \"\"\r\n          }`}\r\n          onClick={() => {\r\n            setSelectedTab(\"logs\");\r\n            setPage(1);\r\n            setFilters({ search: \"\", status: \"all\" });\r\n          }}\r\n        >\r\n          Nhật ký bảo mật\r\n        </button>\r\n      </nav>\r\n\r\n      <section className=\"admin-dashboard__filters\">\r\n        <div className=\"form-floating\">\r\n          <input\r\n            id=\"adminSearch\"\r\n            className=\"form-control\"\r\n            placeholder=\"Tìm kiếm\"\r\n            value={filters.search}\r\n            onChange={handleSearch}\r\n          />\r\n          <label htmlFor=\"adminSearch\">Tìm kiếm</label>\r\n        </div>\r\n        <div className=\"form-floating\">\r\n          <select\r\n            id=\"adminStatus\"\r\n            className=\"form-select\"\r\n            value={filters.status}\r\n            onChange={handleStatusChange}\r\n            disabled={statusOptions.length === 1}\r\n          >\r\n            {statusOptions.map((option) => (\r\n              <option key={option.value} value={option.value}>\r\n                {option.label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n          <label htmlFor=\"adminStatus\">Trạng thái</label>\r\n        </div>\r\n      </section>\r\n\r\n      {error && (\r\n        <div className=\"alert alert-danger\" role=\"alert\">\r\n          <i className=\"bi bi-exclamation-triangle-fill me-2\" aria-hidden></i>\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"admin-dashboard__table card shadow-sm\">\r\n        <div className=\"table-responsive\">\r\n          <table className=\"table align-middle\">\r\n            <thead>\r\n              <tr>\r\n                {activeColumns.map((column) => (\r\n                  <th key={column.key}>{column.label}</th>\r\n                ))}\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {activeData.length === 0 ? (\r\n                <tr>\r\n                  <td\r\n                    colSpan={activeColumns.length}\r\n                    className=\"text-center text-muted py-4\"\r\n                  >\r\n                    Không có dữ liệu.\r\n                  </td>\r\n                </tr>\r\n              ) : (\r\n                activeData.map((row, index) => (\r\n                  <tr key={row.id || row.timestamp || index}>\r\n                    {activeColumns.map((column) => (\r\n                      <td key={column.key}>{formatCell(column, row)}</td>\r\n                    ))}\r\n                  </tr>\r\n                ))\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div className=\"admin-dashboard__pagination\">\r\n          <span>\r\n            Trang {page} / {Math.max(1, Math.ceil(total / DEFAULT_PAGE_SIZE))}\r\n          </span>\r\n          <div className=\"btn-group\">\r\n            <button\r\n              className=\"btn btn-outline-primary\"\r\n              onClick={() => setPage((prev) => Math.max(1, prev - 1))}\r\n              disabled={page === 1}\r\n            >\r\n              <i className=\"bi bi-chevron-left\" aria-hidden></i>\r\n            </button>\r\n            <button\r\n              className=\"btn btn-outline-primary\"\r\n              onClick={() =>\r\n                setPage((prev) =>\r\n                  prev * DEFAULT_PAGE_SIZE >= total ? prev : prev + 1\r\n                )\r\n              }\r\n              disabled={page * DEFAULT_PAGE_SIZE >= total}\r\n            >\r\n              <i className=\"bi bi-chevron-right\" aria-hidden></i>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {loading && <LoaderOverlay message=\"Đang tải dữ liệu quản trị...\" />}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminDashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}