{"ast":null,"code":"var _jsxFileName = \"D:\\\\BMUDHT\\\\frontend\\\\src\\\\components\\\\UserProfile.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport api from \"../services/api\";\nimport Spinner from \"./Spinner\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst emailPattern = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\nconst UserProfile = () => {\n  _s();\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [username, setUsername] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [flash, setFlash] = useState(null);\n  const [pwCurrent, setPwCurrent] = useState(\"\");\n  const [pwNew, setPwNew] = useState(\"\");\n  const [mfaEnabled, setMfaEnabled] = useState(false);\n  const [mfaQR, setMfaQR] = useState(null);\n  const [mfaSecret, setMfaSecret] = useState(\"\");\n  const [mfaToken, setMfaToken] = useState(\"\");\n  const [savingProfile, setSavingProfile] = useState(false);\n  const [changingPw, setChangingPw] = useState(false);\n  const [togglingMfa, setTogglingMfa] = useState(false);\n  const [setupLoading, setSetupLoading] = useState(false);\n  const [verifyingMfa, setVerifyingMfa] = useState(false);\n  const navigate = useNavigate();\n  useEffect(() => {\n    let mounted = true;\n    (async () => {\n      try {\n        var _res$data;\n        const res = await api.get(\"/api/auth/me\");\n        if (!mounted) return;\n        const u = (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.user;\n        if (!u) {\n          setError(\"Không tìm thấy hồ sơ người dùng\");\n          return;\n        }\n        setUser(u);\n        setUsername(u.username || \"\");\n        setEmail(u.email || \"\");\n        setMfaEnabled(Boolean(u.mfaEnabled));\n      } catch (err) {\n        var _err$response;\n        const status = (_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status;\n        if (status === 401 || status === 403) {\n          setError(\"Phiên đăng nhập đã hết hạn. Vui lòng đăng nhập lại.\");\n          navigate(\"/login\", {\n            replace: true\n          });\n        } else {\n          var _err$response2, _err$response2$data;\n          setError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.error) || \"Không thể lấy thông tin người dùng\");\n        }\n      } finally {\n        if (mounted) setLoading(false);\n      }\n    })();\n    return () => {\n      mounted = false;\n    };\n  }, [navigate]);\n  useEffect(() => {\n    if (!flash) return;\n    const timer = setTimeout(() => setFlash(null), 4500);\n    return () => clearTimeout(timer);\n  }, [flash]);\n  const showFlash = (text, tone = \"info\") => setFlash({\n    text,\n    tone\n  });\n  const initials = useMemo(() => {\n    if (!user) return \"U\";\n    const source = user.username || user.email || \"User\";\n    return source.trim().charAt(0).toUpperCase();\n  }, [user]);\n  const saveProfile = async () => {\n    if (!username.trim()) {\n      showFlash(\"Tên người dùng không được bỏ trống.\", \"danger\");\n      return;\n    }\n    if (!emailPattern.test(email.trim())) {\n      showFlash(\"Email không hợp lệ.\", \"danger\");\n      return;\n    }\n    setSavingProfile(true);\n    try {\n      var _res$data2;\n      const res = await api.put(\"/api/auth/me\", {\n        username: username.trim(),\n        email: email.trim()\n      });\n      setUser(prev => ({\n        ...prev,\n        username: username.trim(),\n        email: email.trim()\n      }));\n      showFlash(((_res$data2 = res.data) === null || _res$data2 === void 0 ? void 0 : _res$data2.message) || \"Đã lưu thay đổi.\", \"success\");\n    } catch (err) {\n      var _err$response3, _err$response3$data;\n      showFlash(((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.error) || \"Cập nhật thất bại.\", \"danger\");\n    } finally {\n      setSavingProfile(false);\n    }\n  };\n  const changePassword = async () => {\n    if (!pwCurrent || !pwNew) {\n      showFlash(\"Vui lòng nhập đầy đủ mật khẩu hiện tại và mật khẩu mới.\", \"danger\");\n      return;\n    }\n    if (pwNew.length < 8) {\n      showFlash(\"Mật khẩu mới phải có ít nhất 8 ký tự.\", \"danger\");\n      return;\n    }\n    setChangingPw(true);\n    try {\n      var _res$data3;\n      const res = await api.post(\"/api/auth/change-password\", {\n        currentPassword: pwCurrent,\n        newPassword: pwNew\n      });\n      showFlash(((_res$data3 = res.data) === null || _res$data3 === void 0 ? void 0 : _res$data3.message) || \"Đã đổi mật khẩu.\", \"success\");\n      setPwCurrent(\"\");\n      setPwNew(\"\");\n    } catch (err) {\n      var _err$response4, _err$response4$data;\n      showFlash(((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : (_err$response4$data = _err$response4.data) === null || _err$response4$data === void 0 ? void 0 : _err$response4$data.error) || \"Thay đổi mật khẩu thất bại.\", \"danger\");\n    } finally {\n      setChangingPw(false);\n    }\n  };\n  const toggleMfa = async () => {\n    setTogglingMfa(true);\n    try {\n      var _res$data4, _res$data5;\n      const res = await api.post(\"/api/auth/mfa/toggle\", {});\n      setMfaEnabled(Boolean((_res$data4 = res.data) === null || _res$data4 === void 0 ? void 0 : _res$data4.mfaEnabled));\n      setMfaQR(null);\n      setMfaSecret(\"\");\n      setMfaToken(\"\");\n      showFlash((_res$data5 = res.data) !== null && _res$data5 !== void 0 && _res$data5.mfaEnabled ? \"Đã bật MFA qua email OTP.\" : \"Đã tắt MFA.\", \"success\");\n    } catch (err) {\n      var _err$response5, _err$response5$data;\n      showFlash(((_err$response5 = err.response) === null || _err$response5 === void 0 ? void 0 : (_err$response5$data = _err$response5.data) === null || _err$response5$data === void 0 ? void 0 : _err$response5$data.error) || \"Không thể thay đổi MFA.\", \"danger\");\n    } finally {\n      setTogglingMfa(false);\n    }\n  };\n  const setupMfa = async () => {\n    setSetupLoading(true);\n    try {\n      var _res$data6, _res$data7;\n      const res = await api.post(\"/api/auth/mfa/setup\", {});\n      setMfaQR(((_res$data6 = res.data) === null || _res$data6 === void 0 ? void 0 : _res$data6.qr) || null);\n      setMfaSecret(((_res$data7 = res.data) === null || _res$data7 === void 0 ? void 0 : _res$data7.secret) || \"\");\n      showFlash(\"Đã tạo QR / secret. Vui lòng quét và xác thực.\", \"info\");\n    } catch (err) {\n      var _err$response6, _err$response6$data;\n      showFlash(((_err$response6 = err.response) === null || _err$response6 === void 0 ? void 0 : (_err$response6$data = _err$response6.data) === null || _err$response6$data === void 0 ? void 0 : _err$response6$data.error) || \"Không thể khởi tạo MFA.\", \"danger\");\n    } finally {\n      setSetupLoading(false);\n    }\n  };\n  const verifyMfa = async () => {\n    if (mfaToken.trim().length < 6) {\n      showFlash(\"Nhập mã 6 số từ ứng dụng trước khi xác nhận.\", \"danger\");\n      return;\n    }\n    setVerifyingMfa(true);\n    try {\n      var _res$data8;\n      const res = await api.post(\"/api/auth/mfa/verify\", {\n        token: mfaToken.trim()\n      });\n      showFlash(((_res$data8 = res.data) === null || _res$data8 === void 0 ? void 0 : _res$data8.message) || \"Đã bật MFA.\", \"success\");\n      setMfaEnabled(true);\n      setMfaQR(null);\n      setMfaSecret(\"\");\n      setMfaToken(\"\");\n    } catch (err) {\n      var _err$response7, _err$response7$data;\n      showFlash(((_err$response7 = err.response) === null || _err$response7 === void 0 ? void 0 : (_err$response7$data = _err$response7.data) === null || _err$response7$data === void 0 ? void 0 : _err$response7$data.error) || \"Mã xác nhận không đúng.\", \"danger\");\n    } finally {\n      setVerifyingMfa(false);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card p-4 text-center profile-loading\",\n      children: [/*#__PURE__*/_jsxDEV(Spinner, {\n        size: 28\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\u0110ang t\\u1EA3i h\\u1ED3 s\\u01A1...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card p-4 profile-error text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-danger mb-3\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: () => navigate(\"/login\"),\n        children: \"Quay l\\u1EA1i \\u0111\\u0103ng nh\\u1EADp\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 7\n    }, this);\n  }\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card p-4 text-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-warning mb-0\",\n        children: \"Kh\\xF4ng t\\xECm th\\u1EA5y d\\u1EEF li\\u1EC7u ng\\u01B0\\u1EDDi d\\xF9ng.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 7\n    }, this);\n  }\n  const balanceDisplay = typeof user.balance === \"number\" ? user.balance.toLocaleString(\"vi-VN\") : Number(user.balance || 0).toLocaleString(\"vi-VN\");\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-hero card mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-avatar\",\n        children: initials\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"profile-title mb-1\",\n          children: user.username || \"Người dùng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile-meta\",\n          children: user.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile-meta mt-2\",\n          children: [\"Vai tr\\xF2: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: user.role || \"user\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 22\n          }, this), \" \\xB7 S\\u1ED1 d\\u01B0:\", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: [\" \", balanceDisplay, \" VND\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 7\n    }, this), flash && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `alert alert-${flash.tone} shadow-sm profile-alert`,\n      children: flash.text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row g-4 profile-grid\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-lg-6\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card h-100 p-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"section-title\",\n            children: \"Th\\xF4ng tin c\\xE1 nh\\xE2n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"T\\xEAn ng\\u01B0\\u1EDDi d\\xF9ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control mb-3\",\n            value: username,\n            onChange: e => setUsername(e.target.value),\n            placeholder: \"Nh\\u1EADp t\\xEAn hi\\u1EC3n th\\u1ECB\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control mb-4\",\n            value: email,\n            onChange: e => setEmail(e.target.value),\n            placeholder: \"name@example.com\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary\",\n            onClick: saveProfile,\n            disabled: savingProfile,\n            children: [savingProfile && /*#__PURE__*/_jsxDEV(Spinner, {\n              size: 18\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 33\n            }, this), \"L\\u01B0u thay \\u0111\\u1ED5i\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-lg-6\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card h-100 p-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"section-title\",\n            children: \"\\u0110\\u1ED5i m\\u1EADt kh\\u1EA9u\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"M\\u1EADt kh\\u1EA9u hi\\u1EC7n t\\u1EA1i\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            className: \"form-control mb-3\",\n            value: pwCurrent,\n            onChange: e => setPwCurrent(e.target.value),\n            placeholder: \"Nh\\u1EADp m\\u1EADt kh\\u1EA9u hi\\u1EC7n t\\u1EA1i\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"M\\u1EADt kh\\u1EA9u m\\u1EDBi\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            className: \"form-control mb-4\",\n            value: pwNew,\n            onChange: e => setPwNew(e.target.value),\n            placeholder: \"\\xCDt nh\\u1EA5t 8 k\\xFD t\\u1EF1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-warning text-white\",\n            onClick: changePassword,\n            disabled: changingPw,\n            children: [changingPw && /*#__PURE__*/_jsxDEV(Spinner, {\n              size: 18\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 30\n            }, this), \"\\u0110\\u1ED5i m\\u1EADt kh\\u1EA9u\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-12\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card p-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex justify-content-between align-items-start flex-wrap gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                className: \"section-title mb-1\",\n                children: \"B\\u1EA3o m\\u1EADt 2 l\\u1EDBp (MFA)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 318,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"profile-meta\",\n                children: [\"Tr\\u1EA1ng th\\xE1i:\\xA0\", mfaEnabled ? /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"badge bg-success\",\n                  children: \"\\u0110ang b\\u1EADt\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 322,\n                  columnNumber: 21\n                }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"badge bg-secondary\",\n                  children: \"\\u0110ang t\\u1EAFt\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 324,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-outline-secondary\",\n                onClick: toggleMfa,\n                disabled: togglingMfa,\n                children: [togglingMfa && /*#__PURE__*/_jsxDEV(Spinner, {\n                  size: 18\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 334,\n                  columnNumber: 35\n                }, this), mfaEnabled ? \"Tắt MFA\" : \"Bật nhanh (Email OTP)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 329,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-outline-primary\",\n                onClick: setupMfa,\n                disabled: setupLoading,\n                children: [setupLoading && /*#__PURE__*/_jsxDEV(Spinner, {\n                  size: 18\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 342,\n                  columnNumber: 36\n                }, this), \"Thi\\u1EBFt l\\u1EADp b\\u1EB1ng \\u1EE9ng d\\u1EE5ng\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 337,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 13\n          }, this), mfaQR && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mfa-setup mt-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mfa-instructions\",\n              children: \"Qu\\xE9t QR b\\u1EB1ng Google Authenticator ho\\u1EB7c nh\\u1EADp secret b\\xEAn d\\u01B0\\u1EDBi.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mfa-qr-wrapper\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: mfaQR,\n                alt: \"MFA QR\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 354,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mfa-secret\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Secret:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 356,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"code\", {\n                  children: mfaSecret\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 357,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 355,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: \"Nh\\u1EADp m\\xE3 6 s\\u1ED1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 361,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"form-control\",\n                value: mfaToken,\n                onChange: e => setMfaToken(e.target.value),\n                placeholder: \"123456\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 362,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-success mt-3\",\n                onClick: verifyMfa,\n                disabled: verifyingMfa,\n                children: [verifyingMfa && /*#__PURE__*/_jsxDEV(Spinner, {\n                  size: 18\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 373,\n                  columnNumber: 38\n                }, this), \"X\\xE1c nh\\u1EADn k\\xEDch ho\\u1EA1t\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 368,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 236,\n    columnNumber: 5\n  }, this);\n};\n_s(UserProfile, \"P7PlEDg21sy9nvn3nFUgiZ/Fa/0=\", false, function () {\n  return [useNavigate];\n});\n_c = UserProfile;\nexport default UserProfile;\nvar _c;\n$RefreshReg$(_c, \"UserProfile\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","useNavigate","api","Spinner","jsxDEV","_jsxDEV","emailPattern","UserProfile","_s","user","setUser","loading","setLoading","error","setError","username","setUsername","email","setEmail","flash","setFlash","pwCurrent","setPwCurrent","pwNew","setPwNew","mfaEnabled","setMfaEnabled","mfaQR","setMfaQR","mfaSecret","setMfaSecret","mfaToken","setMfaToken","savingProfile","setSavingProfile","changingPw","setChangingPw","togglingMfa","setTogglingMfa","setupLoading","setSetupLoading","verifyingMfa","setVerifyingMfa","navigate","mounted","_res$data","res","get","u","data","Boolean","err","_err$response","status","response","replace","_err$response2","_err$response2$data","timer","setTimeout","clearTimeout","showFlash","text","tone","initials","source","trim","charAt","toUpperCase","saveProfile","test","_res$data2","put","prev","message","_err$response3","_err$response3$data","changePassword","length","_res$data3","post","currentPassword","newPassword","_err$response4","_err$response4$data","toggleMfa","_res$data4","_res$data5","_err$response5","_err$response5$data","setupMfa","_res$data6","_res$data7","qr","secret","_err$response6","_err$response6$data","verifyMfa","_res$data8","token","_err$response7","_err$response7$data","className","children","size","fileName","_jsxFileName","lineNumber","columnNumber","onClick","balanceDisplay","balance","toLocaleString","Number","role","value","onChange","e","target","placeholder","disabled","type","src","alt","_c","$RefreshReg$"],"sources":["D:/BMUDHT/frontend/src/components/UserProfile.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport api from \"../services/api\";\r\nimport Spinner from \"./Spinner\";\r\n\r\nconst emailPattern = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n\r\nconst UserProfile = () => {\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [username, setUsername] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [flash, setFlash] = useState(null);\r\n  const [pwCurrent, setPwCurrent] = useState(\"\");\r\n  const [pwNew, setPwNew] = useState(\"\");\r\n  const [mfaEnabled, setMfaEnabled] = useState(false);\r\n  const [mfaQR, setMfaQR] = useState(null);\r\n  const [mfaSecret, setMfaSecret] = useState(\"\");\r\n  const [mfaToken, setMfaToken] = useState(\"\");\r\n  const [savingProfile, setSavingProfile] = useState(false);\r\n  const [changingPw, setChangingPw] = useState(false);\r\n  const [togglingMfa, setTogglingMfa] = useState(false);\r\n  const [setupLoading, setSetupLoading] = useState(false);\r\n  const [verifyingMfa, setVerifyingMfa] = useState(false);\r\n\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    (async () => {\r\n      try {\r\n        const res = await api.get(\"/api/auth/me\");\r\n        if (!mounted) return;\r\n        const u = res.data?.user;\r\n        if (!u) {\r\n          setError(\"Không tìm thấy hồ sơ người dùng\");\r\n          return;\r\n        }\r\n        setUser(u);\r\n        setUsername(u.username || \"\");\r\n        setEmail(u.email || \"\");\r\n        setMfaEnabled(Boolean(u.mfaEnabled));\r\n      } catch (err) {\r\n        const status = err.response?.status;\r\n        if (status === 401 || status === 403) {\r\n          setError(\"Phiên đăng nhập đã hết hạn. Vui lòng đăng nhập lại.\");\r\n          navigate(\"/login\", { replace: true });\r\n        } else {\r\n          setError(\r\n            err.response?.data?.error || \"Không thể lấy thông tin người dùng\"\r\n          );\r\n        }\r\n      } finally {\r\n        if (mounted) setLoading(false);\r\n      }\r\n    })();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [navigate]);\r\n\r\n  useEffect(() => {\r\n    if (!flash) return;\r\n    const timer = setTimeout(() => setFlash(null), 4500);\r\n    return () => clearTimeout(timer);\r\n  }, [flash]);\r\n\r\n  const showFlash = (text, tone = \"info\") => setFlash({ text, tone });\r\n\r\n  const initials = useMemo(() => {\r\n    if (!user) return \"U\";\r\n    const source = user.username || user.email || \"User\";\r\n    return source.trim().charAt(0).toUpperCase();\r\n  }, [user]);\r\n\r\n  const saveProfile = async () => {\r\n    if (!username.trim()) {\r\n      showFlash(\"Tên người dùng không được bỏ trống.\", \"danger\");\r\n      return;\r\n    }\r\n    if (!emailPattern.test(email.trim())) {\r\n      showFlash(\"Email không hợp lệ.\", \"danger\");\r\n      return;\r\n    }\r\n    setSavingProfile(true);\r\n    try {\r\n      const res = await api.put(\"/api/auth/me\", {\r\n        username: username.trim(),\r\n        email: email.trim(),\r\n      });\r\n      setUser((prev) => ({\r\n        ...prev,\r\n        username: username.trim(),\r\n        email: email.trim(),\r\n      }));\r\n      showFlash(res.data?.message || \"Đã lưu thay đổi.\", \"success\");\r\n    } catch (err) {\r\n      showFlash(err.response?.data?.error || \"Cập nhật thất bại.\", \"danger\");\r\n    } finally {\r\n      setSavingProfile(false);\r\n    }\r\n  };\r\n\r\n  const changePassword = async () => {\r\n    if (!pwCurrent || !pwNew) {\r\n      showFlash(\r\n        \"Vui lòng nhập đầy đủ mật khẩu hiện tại và mật khẩu mới.\",\r\n        \"danger\"\r\n      );\r\n      return;\r\n    }\r\n    if (pwNew.length < 8) {\r\n      showFlash(\"Mật khẩu mới phải có ít nhất 8 ký tự.\", \"danger\");\r\n      return;\r\n    }\r\n    setChangingPw(true);\r\n    try {\r\n      const res = await api.post(\"/api/auth/change-password\", {\r\n        currentPassword: pwCurrent,\r\n        newPassword: pwNew,\r\n      });\r\n      showFlash(res.data?.message || \"Đã đổi mật khẩu.\", \"success\");\r\n      setPwCurrent(\"\");\r\n      setPwNew(\"\");\r\n    } catch (err) {\r\n      showFlash(\r\n        err.response?.data?.error || \"Thay đổi mật khẩu thất bại.\",\r\n        \"danger\"\r\n      );\r\n    } finally {\r\n      setChangingPw(false);\r\n    }\r\n  };\r\n\r\n  const toggleMfa = async () => {\r\n    setTogglingMfa(true);\r\n    try {\r\n      const res = await api.post(\"/api/auth/mfa/toggle\", {});\r\n      setMfaEnabled(Boolean(res.data?.mfaEnabled));\r\n      setMfaQR(null);\r\n      setMfaSecret(\"\");\r\n      setMfaToken(\"\");\r\n      showFlash(\r\n        res.data?.mfaEnabled ? \"Đã bật MFA qua email OTP.\" : \"Đã tắt MFA.\",\r\n        \"success\"\r\n      );\r\n    } catch (err) {\r\n      showFlash(\r\n        err.response?.data?.error || \"Không thể thay đổi MFA.\",\r\n        \"danger\"\r\n      );\r\n    } finally {\r\n      setTogglingMfa(false);\r\n    }\r\n  };\r\n\r\n  const setupMfa = async () => {\r\n    setSetupLoading(true);\r\n    try {\r\n      const res = await api.post(\"/api/auth/mfa/setup\", {});\r\n      setMfaQR(res.data?.qr || null);\r\n      setMfaSecret(res.data?.secret || \"\");\r\n      showFlash(\"Đã tạo QR / secret. Vui lòng quét và xác thực.\", \"info\");\r\n    } catch (err) {\r\n      showFlash(\r\n        err.response?.data?.error || \"Không thể khởi tạo MFA.\",\r\n        \"danger\"\r\n      );\r\n    } finally {\r\n      setSetupLoading(false);\r\n    }\r\n  };\r\n\r\n  const verifyMfa = async () => {\r\n    if (mfaToken.trim().length < 6) {\r\n      showFlash(\"Nhập mã 6 số từ ứng dụng trước khi xác nhận.\", \"danger\");\r\n      return;\r\n    }\r\n    setVerifyingMfa(true);\r\n    try {\r\n      const res = await api.post(\"/api/auth/mfa/verify\", {\r\n        token: mfaToken.trim(),\r\n      });\r\n      showFlash(res.data?.message || \"Đã bật MFA.\", \"success\");\r\n      setMfaEnabled(true);\r\n      setMfaQR(null);\r\n      setMfaSecret(\"\");\r\n      setMfaToken(\"\");\r\n    } catch (err) {\r\n      showFlash(\r\n        err.response?.data?.error || \"Mã xác nhận không đúng.\",\r\n        \"danger\"\r\n      );\r\n    } finally {\r\n      setVerifyingMfa(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"card p-4 text-center profile-loading\">\r\n        <Spinner size={28} />\r\n        <span>Đang tải hồ sơ...</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"card p-4 profile-error text-center\">\r\n        <div className=\"alert alert-danger mb-3\">{error}</div>\r\n        <button className=\"btn btn-primary\" onClick={() => navigate(\"/login\")}>\r\n          Quay lại đăng nhập\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"card p-4 text-center\">\r\n        <div className=\"alert alert-warning mb-0\">\r\n          Không tìm thấy dữ liệu người dùng.\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const balanceDisplay =\r\n    typeof user.balance === \"number\"\r\n      ? user.balance.toLocaleString(\"vi-VN\")\r\n      : Number(user.balance || 0).toLocaleString(\"vi-VN\");\r\n\r\n  return (\r\n    <div className=\"profile-page\">\r\n      <div className=\"profile-hero card mb-4\">\r\n        <div className=\"profile-avatar\">{initials}</div>\r\n        <div>\r\n          <h2 className=\"profile-title mb-1\">\r\n            {user.username || \"Người dùng\"}\r\n          </h2>\r\n          <div className=\"profile-meta\">{user.email}</div>\r\n          <div className=\"profile-meta mt-2\">\r\n            Vai trò: <strong>{user.role || \"user\"}</strong> · Số dư:\r\n            <strong> {balanceDisplay} VND</strong>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {flash && (\r\n        <div className={`alert alert-${flash.tone} shadow-sm profile-alert`}>\r\n          {flash.text}\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"row g-4 profile-grid\">\r\n        <div className=\"col-lg-6\">\r\n          <div className=\"card h-100 p-4\">\r\n            <h5 className=\"section-title\">Thông tin cá nhân</h5>\r\n            <label className=\"form-label\">Tên người dùng</label>\r\n            <input\r\n              className=\"form-control mb-3\"\r\n              value={username}\r\n              onChange={(e) => setUsername(e.target.value)}\r\n              placeholder=\"Nhập tên hiển thị\"\r\n            />\r\n            <label className=\"form-label\">Email</label>\r\n            <input\r\n              className=\"form-control mb-4\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              placeholder=\"name@example.com\"\r\n            />\r\n            <button\r\n              className=\"btn btn-primary\"\r\n              onClick={saveProfile}\r\n              disabled={savingProfile}\r\n            >\r\n              {savingProfile && <Spinner size={18} />}Lưu thay đổi\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"col-lg-6\">\r\n          <div className=\"card h-100 p-4\">\r\n            <h5 className=\"section-title\">Đổi mật khẩu</h5>\r\n            <label className=\"form-label\">Mật khẩu hiện tại</label>\r\n            <input\r\n              type=\"password\"\r\n              className=\"form-control mb-3\"\r\n              value={pwCurrent}\r\n              onChange={(e) => setPwCurrent(e.target.value)}\r\n              placeholder=\"Nhập mật khẩu hiện tại\"\r\n            />\r\n            <label className=\"form-label\">Mật khẩu mới</label>\r\n            <input\r\n              type=\"password\"\r\n              className=\"form-control mb-4\"\r\n              value={pwNew}\r\n              onChange={(e) => setPwNew(e.target.value)}\r\n              placeholder=\"Ít nhất 8 ký tự\"\r\n            />\r\n            <button\r\n              className=\"btn btn-warning text-white\"\r\n              onClick={changePassword}\r\n              disabled={changingPw}\r\n            >\r\n              {changingPw && <Spinner size={18} />}Đổi mật khẩu\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"col-12\">\r\n          <div className=\"card p-4\">\r\n            <div className=\"d-flex justify-content-between align-items-start flex-wrap gap-3\">\r\n              <div>\r\n                <h5 className=\"section-title mb-1\">Bảo mật 2 lớp (MFA)</h5>\r\n                <div className=\"profile-meta\">\r\n                  Trạng thái:&nbsp;\r\n                  {mfaEnabled ? (\r\n                    <span className=\"badge bg-success\">Đang bật</span>\r\n                  ) : (\r\n                    <span className=\"badge bg-secondary\">Đang tắt</span>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div className=\"d-flex gap-2\">\r\n                <button\r\n                  className=\"btn btn-outline-secondary\"\r\n                  onClick={toggleMfa}\r\n                  disabled={togglingMfa}\r\n                >\r\n                  {togglingMfa && <Spinner size={18} />}\r\n                  {mfaEnabled ? \"Tắt MFA\" : \"Bật nhanh (Email OTP)\"}\r\n                </button>\r\n                <button\r\n                  className=\"btn btn-outline-primary\"\r\n                  onClick={setupMfa}\r\n                  disabled={setupLoading}\r\n                >\r\n                  {setupLoading && <Spinner size={18} />}\r\n                  Thiết lập bằng ứng dụng\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {mfaQR && (\r\n              <div className=\"mfa-setup mt-4\">\r\n                <div className=\"mfa-instructions\">\r\n                  Quét QR bằng Google Authenticator hoặc nhập secret bên dưới.\r\n                </div>\r\n                <div className=\"mfa-qr-wrapper\">\r\n                  <img src={mfaQR} alt=\"MFA QR\" />\r\n                  <div className=\"mfa-secret\">\r\n                    <span>Secret:</span>\r\n                    <code>{mfaSecret}</code>\r\n                  </div>\r\n                </div>\r\n                <div className=\"mt-3\">\r\n                  <label className=\"form-label\">Nhập mã 6 số</label>\r\n                  <input\r\n                    className=\"form-control\"\r\n                    value={mfaToken}\r\n                    onChange={(e) => setMfaToken(e.target.value)}\r\n                    placeholder=\"123456\"\r\n                  />\r\n                  <button\r\n                    className=\"btn btn-success mt-3\"\r\n                    onClick={verifyMfa}\r\n                    disabled={verifyingMfa}\r\n                  >\r\n                    {verifyingMfa && <Spinner size={18} />}\r\n                    Xác nhận kích hoạt\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserProfile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}