{"ast":null,"code":"var _jsxFileName = \"D:\\\\BMUDHT\\\\frontend\\\\src\\\\components\\\\UserProfile.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport api from \"../services/api\";\nimport Spinner from \"./Spinner\";\nimport { usePreferences } from \"../context/PreferencesContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst dictionary = {\n  vi: {\n    loading: \"Đang tải hồ sơ...\",\n    loadErrorMissing: \"Không tìm thấy hồ sơ người dùng\",\n    sessionExpired: \"Phiên đăng nhập đã hết hạn. Vui lòng đăng nhập lại.\",\n    loadErrorGeneric: \"Không thể lấy thông tin người dùng\",\n    actionBackToLogin: \"Quay lại đăng nhập\",\n    noUser: \"Không tìm thấy dữ liệu người dùng.\",\n    hero: {\n      fallbackName: \"Người dùng\",\n      rolePrefix: \"Vai trò:\",\n      balancePrefix: \"Số dư:\",\n      balanceSuffix: \"VND\"\n    },\n    roles: {\n      admin: \"Quản trị viên hệ thống\",\n      user: \"Khách hàng cá nhân\",\n      staff: \"Chuyên viên hỗ trợ\"\n    },\n    sections: {\n      personal: \"Thông tin cá nhân\",\n      password: \"Đổi mật khẩu\",\n      mfa: \"Bảo mật 2 lớp (MFA)\"\n    },\n    labels: {\n      username: \"Tên người dùng\",\n      usernamePlaceholder: \"Nhập tên hiển thị\",\n      email: \"Email\",\n      emailPlaceholder: \"name@example.com\",\n      save: \"Lưu thay đổi\",\n      currentPassword: \"Mật khẩu hiện tại\",\n      currentPasswordPlaceholder: \"Nhập mật khẩu hiện tại\",\n      newPassword: \"Mật khẩu mới\",\n      newPasswordPlaceholder: \"Ít nhất 8 ký tự\",\n      changePassword: \"Đổi mật khẩu\",\n      mfaStatus: \"Trạng thái:\",\n      mfaOn: \"Đang bật\",\n      mfaOff: \"Đang tắt\",\n      toggleMfaOn: \"Tắt MFA\",\n      toggleMfaOff: \"Bật nhanh (Email OTP)\",\n      setupApp: \"Thiết lập bằng ứng dụng\",\n      mfaInstructions: \"Quét QR bằng Google Authenticator hoặc nhập secret bên dưới.\",\n      secretLabel: \"Secret:\",\n      otpLabel: \"Nhập mã 6 số\",\n      otpPlaceholder: \"123456\",\n      verifyMfa: \"Xác nhận kích hoạt\"\n    },\n    flash: {\n      usernameRequired: \"Tên người dùng không được bỏ trống.\",\n      emailInvalid: \"Email không hợp lệ.\",\n      saveSuccess: \"Đã lưu thay đổi.\",\n      saveFail: \"Cập nhật thất bại.\",\n      passwordFields: \"Vui lòng nhập đầy đủ mật khẩu hiện tại và mật khẩu mới.\",\n      passwordTooShort: \"Mật khẩu mới phải có ít nhất 8 ký tự.\",\n      passwordSuccess: \"Đã đổi mật khẩu.\",\n      passwordFail: \"Thay đổi mật khẩu thất bại.\",\n      mfaToggleOn: \"Đã bật MFA qua email OTP.\",\n      mfaToggleOff: \"Đã tắt MFA.\",\n      mfaToggleFail: \"Không thể thay đổi MFA.\",\n      mfaSetupInit: \"Đã tạo QR / secret. Vui lòng quét và xác thực.\",\n      mfaSetupFail: \"Không thể khởi tạo MFA.\",\n      mfaTokenRequired: \"Nhập mã 6 số từ ứng dụng trước khi xác nhận.\",\n      mfaVerifySuccess: \"Đã bật MFA.\",\n      mfaVerifyFail: \"Mã xác nhận không đúng.\"\n    }\n  },\n  en: {\n    loading: \"Loading profile...\",\n    loadErrorMissing: \"User profile not found\",\n    sessionExpired: \"Your session has expired. Please sign in again.\",\n    loadErrorGeneric: \"Unable to retrieve user information\",\n    actionBackToLogin: \"Back to login\",\n    noUser: \"User data is unavailable.\",\n    hero: {\n      fallbackName: \"User\",\n      rolePrefix: \"Role:\",\n      balancePrefix: \"Balance:\",\n      balanceSuffix: \"VND\"\n    },\n    roles: {\n      admin: \"Platform administrator\",\n      user: \"Retail customer\",\n      staff: \"Support specialist\"\n    },\n    sections: {\n      personal: \"Personal information\",\n      password: \"Change password\",\n      mfa: \"Multi-factor authentication (MFA)\"\n    },\n    labels: {\n      username: \"Username\",\n      usernamePlaceholder: \"Display name\",\n      email: \"Email\",\n      emailPlaceholder: \"name@example.com\",\n      save: \"Save changes\",\n      currentPassword: \"Current password\",\n      currentPasswordPlaceholder: \"Enter current password\",\n      newPassword: \"New password\",\n      newPasswordPlaceholder: \"At least 8 characters\",\n      changePassword: \"Update password\",\n      mfaStatus: \"Status:\",\n      mfaOn: \"Enabled\",\n      mfaOff: \"Disabled\",\n      toggleMfaOn: \"Disable MFA\",\n      toggleMfaOff: \"Enable via email OTP\",\n      setupApp: \"Set up with authenticator app\",\n      mfaInstructions: \"Scan the QR with Google Authenticator or enter the secret below.\",\n      secretLabel: \"Secret:\",\n      otpLabel: \"Enter 6-digit code\",\n      otpPlaceholder: \"123456\",\n      verifyMfa: \"Confirm activation\"\n    },\n    flash: {\n      usernameRequired: \"Username cannot be empty.\",\n      emailInvalid: \"Email is invalid.\",\n      saveSuccess: \"Changes saved successfully.\",\n      saveFail: \"Update failed.\",\n      passwordFields: \"Please fill in both current and new passwords.\",\n      passwordTooShort: \"New password must contain at least 8 characters.\",\n      passwordSuccess: \"Password updated successfully.\",\n      passwordFail: \"Password change failed.\",\n      mfaToggleOn: \"Email OTP MFA enabled.\",\n      mfaToggleOff: \"MFA has been disabled.\",\n      mfaToggleFail: \"Unable to update MFA settings.\",\n      mfaSetupInit: \"Secret generated. Scan the QR code and complete verification.\",\n      mfaSetupFail: \"Unable to initialise MFA.\",\n      mfaTokenRequired: \"Enter the 6-digit code from your authenticator app first.\",\n      mfaVerifySuccess: \"MFA has been enabled.\",\n      mfaVerifyFail: \"Verification code is incorrect.\"\n    }\n  }\n};\nconst emailPattern = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\nconst UserProfile = () => {\n  _s();\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [username, setUsername] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [flash, setFlash] = useState(null);\n  const [pwCurrent, setPwCurrent] = useState(\"\");\n  const [pwNew, setPwNew] = useState(\"\");\n  const [mfaEnabled, setMfaEnabled] = useState(false);\n  const [mfaQR, setMfaQR] = useState(null);\n  const [mfaSecret, setMfaSecret] = useState(\"\");\n  const [mfaToken, setMfaToken] = useState(\"\");\n  const [savingProfile, setSavingProfile] = useState(false);\n  const [changingPw, setChangingPw] = useState(false);\n  const [togglingMfa, setTogglingMfa] = useState(false);\n  const [setupLoading, setSetupLoading] = useState(false);\n  const [verifyingMfa, setVerifyingMfa] = useState(false);\n  const navigate = useNavigate();\n  const {\n    language\n  } = usePreferences();\n  const text = dictionary[language] || dictionary.vi;\n  const locale = language === \"vi\" ? \"vi-VN\" : \"en-US\";\n  useEffect(() => {\n    let mounted = true;\n    (async () => {\n      try {\n        var _res$data;\n        const res = await api.get(\"/api/auth/me\");\n        if (!mounted) return;\n        const u = (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.user;\n        if (!u) {\n          setError(text.loadErrorMissing);\n          return;\n        }\n        setUser(u);\n        setUsername(u.username || \"\");\n        setEmail(u.email || \"\");\n        setMfaEnabled(Boolean(u.mfaEnabled));\n      } catch (err) {\n        var _err$response;\n        const status = (_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status;\n        if (status === 401 || status === 403) {\n          setError(text.sessionExpired);\n          navigate(\"/login\", {\n            replace: true\n          });\n        } else {\n          var _err$response2, _err$response2$data;\n          setError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.error) || text.loadErrorGeneric);\n        }\n      } finally {\n        if (mounted) setLoading(false);\n      }\n    })();\n    return () => {\n      mounted = false;\n    };\n  }, [navigate, text.loadErrorMissing, text.sessionExpired, text.loadErrorGeneric]);\n  useEffect(() => {\n    if (!flash) return;\n    const timer = setTimeout(() => setFlash(null), 4500);\n    return () => clearTimeout(timer);\n  }, [flash]);\n  const showFlash = (text, tone = \"info\") => setFlash({\n    text,\n    tone\n  });\n  const initials = useMemo(() => {\n    if (!user) return \"U\";\n    const source = user.username || user.email || \"User\";\n    return source.trim().charAt(0).toUpperCase();\n  }, [user]);\n  const saveProfile = async () => {\n    if (!username.trim()) {\n      showFlash(text.flash.usernameRequired, \"danger\");\n      return;\n    }\n    if (!emailPattern.test(email.trim())) {\n      showFlash(text.flash.emailInvalid, \"danger\");\n      return;\n    }\n    setSavingProfile(true);\n    try {\n      var _res$data2;\n      const res = await api.put(\"/api/auth/me\", {\n        username: username.trim(),\n        email: email.trim()\n      });\n      setUser(prev => ({\n        ...prev,\n        username: username.trim(),\n        email: email.trim()\n      }));\n      showFlash(((_res$data2 = res.data) === null || _res$data2 === void 0 ? void 0 : _res$data2.message) || text.flash.saveSuccess, \"success\");\n    } catch (err) {\n      var _err$response3, _err$response3$data;\n      showFlash(((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.error) || text.flash.saveFail, \"danger\");\n    } finally {\n      setSavingProfile(false);\n    }\n  };\n  const changePassword = async () => {\n    if (!pwCurrent || !pwNew) {\n      showFlash(text.flash.passwordFields, \"danger\");\n      return;\n    }\n    if (pwNew.length < 8) {\n      showFlash(text.flash.passwordTooShort, \"danger\");\n      return;\n    }\n    setChangingPw(true);\n    try {\n      var _res$data3;\n      const res = await api.post(\"/api/auth/change-password\", {\n        currentPassword: pwCurrent,\n        newPassword: pwNew\n      });\n      showFlash(((_res$data3 = res.data) === null || _res$data3 === void 0 ? void 0 : _res$data3.message) || text.flash.passwordSuccess, \"success\");\n      setPwCurrent(\"\");\n      setPwNew(\"\");\n    } catch (err) {\n      var _err$response4, _err$response4$data;\n      showFlash(((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : (_err$response4$data = _err$response4.data) === null || _err$response4$data === void 0 ? void 0 : _err$response4$data.error) || text.flash.passwordFail, \"danger\");\n    } finally {\n      setChangingPw(false);\n    }\n  };\n  const toggleMfa = async () => {\n    setTogglingMfa(true);\n    try {\n      var _res$data4, _res$data5;\n      const res = await api.post(\"/api/auth/mfa/toggle\", {});\n      setMfaEnabled(Boolean((_res$data4 = res.data) === null || _res$data4 === void 0 ? void 0 : _res$data4.mfaEnabled));\n      setMfaQR(null);\n      setMfaSecret(\"\");\n      setMfaToken(\"\");\n      showFlash((_res$data5 = res.data) !== null && _res$data5 !== void 0 && _res$data5.mfaEnabled ? text.flash.mfaToggleOn : text.flash.mfaToggleOff, \"success\");\n    } catch (err) {\n      var _err$response5, _err$response5$data;\n      showFlash(((_err$response5 = err.response) === null || _err$response5 === void 0 ? void 0 : (_err$response5$data = _err$response5.data) === null || _err$response5$data === void 0 ? void 0 : _err$response5$data.error) || text.flash.mfaToggleFail, \"danger\");\n    } finally {\n      setTogglingMfa(false);\n    }\n  };\n  const setupMfa = async () => {\n    setSetupLoading(true);\n    try {\n      var _res$data6, _res$data7;\n      const res = await api.post(\"/api/auth/mfa/setup\", {});\n      setMfaQR(((_res$data6 = res.data) === null || _res$data6 === void 0 ? void 0 : _res$data6.qr) || null);\n      setMfaSecret(((_res$data7 = res.data) === null || _res$data7 === void 0 ? void 0 : _res$data7.secret) || \"\");\n      showFlash(text.flash.mfaSetupInit, \"info\");\n    } catch (err) {\n      var _err$response6, _err$response6$data;\n      showFlash(((_err$response6 = err.response) === null || _err$response6 === void 0 ? void 0 : (_err$response6$data = _err$response6.data) === null || _err$response6$data === void 0 ? void 0 : _err$response6$data.error) || text.flash.mfaSetupFail, \"danger\");\n    } finally {\n      setSetupLoading(false);\n    }\n  };\n  const verifyMfa = async () => {\n    if (mfaToken.trim().length < 6) {\n      showFlash(text.flash.mfaTokenRequired, \"danger\");\n      return;\n    }\n    setVerifyingMfa(true);\n    try {\n      var _res$data8;\n      const res = await api.post(\"/api/auth/mfa/verify\", {\n        token: mfaToken.trim()\n      });\n      showFlash(((_res$data8 = res.data) === null || _res$data8 === void 0 ? void 0 : _res$data8.message) || text.flash.mfaVerifySuccess, \"success\");\n      setMfaEnabled(true);\n      setMfaQR(null);\n      setMfaSecret(\"\");\n      setMfaToken(\"\");\n    } catch (err) {\n      var _err$response7, _err$response7$data;\n      showFlash(((_err$response7 = err.response) === null || _err$response7 === void 0 ? void 0 : (_err$response7$data = _err$response7.data) === null || _err$response7$data === void 0 ? void 0 : _err$response7$data.error) || text.flash.mfaVerifyFail, \"danger\");\n    } finally {\n      setVerifyingMfa(false);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card p-4 text-center profile-loading\",\n      children: [/*#__PURE__*/_jsxDEV(Spinner, {\n        size: 28\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: text.loading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card p-4 profile-error text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-danger mb-3\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: () => navigate(\"/login\"),\n        children: text.actionBackToLogin\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 7\n    }, this);\n  }\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card p-4 text-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-warning mb-0\",\n        children: text.noUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 7\n    }, this);\n  }\n  const balanceDisplay = typeof user.balance === \"number\" ? user.balance.toLocaleString(locale) : Number(user.balance || 0).toLocaleString(locale);\n  const roleLabel = text.roles[user.role] || text.roles.user || user.role || \"user\";\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-hero card mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-avatar\",\n        children: initials\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"profile-title mb-1\",\n          children: user.username || text.hero.fallbackName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile-meta\",\n          children: user.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile-meta mt-2\",\n          children: [text.hero.rolePrefix, \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: roleLabel\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 36\n          }, this), \" \\xB7 \", text.hero.balancePrefix, /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: [\" \", balanceDisplay, \" \", text.hero.balanceSuffix]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 393,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 7\n    }, this), flash && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `alert alert-${flash.tone} shadow-sm profile-alert`,\n      children: flash.text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row g-4 profile-grid\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-lg-6\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card h-100 p-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"section-title\",\n            children: text.sections.personal\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: text.labels.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control mb-3\",\n            value: username,\n            onChange: e => setUsername(e.target.value),\n            placeholder: text.labels.usernamePlaceholder\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: text.labels.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control mb-4\",\n            value: email,\n            onChange: e => setEmail(e.target.value),\n            placeholder: text.labels.emailPlaceholder\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 416,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary\",\n            onClick: saveProfile,\n            disabled: savingProfile,\n            children: [savingProfile && /*#__PURE__*/_jsxDEV(Spinner, {\n              size: 18\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 427,\n              columnNumber: 33\n            }, this), text.labels.save]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 422,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-lg-6\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card h-100 p-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"section-title\",\n            children: text.sections.password\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 435,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: text.labels.currentPassword\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 436,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            className: \"form-control mb-3\",\n            value: pwCurrent,\n            onChange: e => setPwCurrent(e.target.value),\n            placeholder: text.labels.currentPasswordPlaceholder\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: text.labels.newPassword\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 444,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            className: \"form-control mb-4\",\n            value: pwNew,\n            onChange: e => setPwNew(e.target.value),\n            placeholder: text.labels.newPasswordPlaceholder\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-warning text-white\",\n            onClick: changePassword,\n            disabled: changingPw,\n            children: [changingPw && /*#__PURE__*/_jsxDEV(Spinner, {\n              size: 18\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 457,\n              columnNumber: 30\n            }, this), text.labels.changePassword]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 452,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-12\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card p-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex justify-content-between align-items-start flex-wrap gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                className: \"section-title mb-1\",\n                children: text.sections.mfa\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 467,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"profile-meta\",\n                children: [text.labels.mfaStatus, \"\\xA0\", mfaEnabled ? /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"badge bg-success\",\n                  children: text.labels.mfaOn\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 471,\n                  columnNumber: 21\n                }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"badge bg-secondary\",\n                  children: text.labels.mfaOff\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 473,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 468,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 466,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-outline-secondary\",\n                onClick: toggleMfa,\n                disabled: togglingMfa,\n                children: [togglingMfa && /*#__PURE__*/_jsxDEV(Spinner, {\n                  size: 18\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 483,\n                  columnNumber: 35\n                }, this), mfaEnabled ? text.labels.toggleMfaOn : text.labels.toggleMfaOff]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 478,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-outline-primary\",\n                onClick: setupMfa,\n                disabled: setupLoading,\n                children: [setupLoading && /*#__PURE__*/_jsxDEV(Spinner, {\n                  size: 18\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 491,\n                  columnNumber: 36\n                }, this), text.labels.setupApp]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 486,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 477,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 465,\n            columnNumber: 13\n          }, this), mfaQR && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mfa-setup mt-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mfa-instructions\",\n              children: text.labels.mfaInstructions\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 499,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mfa-qr-wrapper\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: mfaQR,\n                alt: \"MFA QR\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 503,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mfa-secret\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: text.labels.secretLabel\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 505,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"code\", {\n                  children: mfaSecret\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 506,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 504,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 502,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: text.labels.otpLabel\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 510,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"form-control\",\n                value: mfaToken,\n                onChange: e => setMfaToken(e.target.value),\n                placeholder: text.labels.otpPlaceholder\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 511,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-success mt-3\",\n                onClick: verifyMfa,\n                disabled: verifyingMfa,\n                children: [verifyingMfa && /*#__PURE__*/_jsxDEV(Spinner, {\n                  size: 18\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 522,\n                  columnNumber: 38\n                }, this), text.labels.verifyMfa]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 517,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 509,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 498,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 383,\n    columnNumber: 5\n  }, this);\n};\n_s(UserProfile, \"i8ZrcbM+4kP7EII07y3Ew0Fr8AQ=\", false, function () {\n  return [useNavigate, usePreferences];\n});\n_c = UserProfile;\nexport default UserProfile;\nvar _c;\n$RefreshReg$(_c, \"UserProfile\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","useNavigate","api","Spinner","usePreferences","jsxDEV","_jsxDEV","dictionary","vi","loading","loadErrorMissing","sessionExpired","loadErrorGeneric","actionBackToLogin","noUser","hero","fallbackName","rolePrefix","balancePrefix","balanceSuffix","roles","admin","user","staff","sections","personal","password","mfa","labels","username","usernamePlaceholder","email","emailPlaceholder","save","currentPassword","currentPasswordPlaceholder","newPassword","newPasswordPlaceholder","changePassword","mfaStatus","mfaOn","mfaOff","toggleMfaOn","toggleMfaOff","setupApp","mfaInstructions","secretLabel","otpLabel","otpPlaceholder","verifyMfa","flash","usernameRequired","emailInvalid","saveSuccess","saveFail","passwordFields","passwordTooShort","passwordSuccess","passwordFail","mfaToggleOn","mfaToggleOff","mfaToggleFail","mfaSetupInit","mfaSetupFail","mfaTokenRequired","mfaVerifySuccess","mfaVerifyFail","en","emailPattern","UserProfile","_s","setUser","setLoading","error","setError","setUsername","setEmail","setFlash","pwCurrent","setPwCurrent","pwNew","setPwNew","mfaEnabled","setMfaEnabled","mfaQR","setMfaQR","mfaSecret","setMfaSecret","mfaToken","setMfaToken","savingProfile","setSavingProfile","changingPw","setChangingPw","togglingMfa","setTogglingMfa","setupLoading","setSetupLoading","verifyingMfa","setVerifyingMfa","navigate","language","text","locale","mounted","_res$data","res","get","u","data","Boolean","err","_err$response","status","response","replace","_err$response2","_err$response2$data","timer","setTimeout","clearTimeout","showFlash","tone","initials","source","trim","charAt","toUpperCase","saveProfile","test","_res$data2","put","prev","message","_err$response3","_err$response3$data","length","_res$data3","post","_err$response4","_err$response4$data","toggleMfa","_res$data4","_res$data5","_err$response5","_err$response5$data","setupMfa","_res$data6","_res$data7","qr","secret","_err$response6","_err$response6$data","_res$data8","token","_err$response7","_err$response7$data","className","children","size","fileName","_jsxFileName","lineNumber","columnNumber","onClick","balanceDisplay","balance","toLocaleString","Number","roleLabel","role","value","onChange","e","target","placeholder","disabled","type","src","alt","_c","$RefreshReg$"],"sources":["D:/BMUDHT/frontend/src/components/UserProfile.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport api from \"../services/api\";\r\nimport Spinner from \"./Spinner\";\r\nimport { usePreferences } from \"../context/PreferencesContext\";\r\n\r\nconst dictionary = {\r\n  vi: {\r\n    loading: \"Đang tải hồ sơ...\",\r\n    loadErrorMissing: \"Không tìm thấy hồ sơ người dùng\",\r\n    sessionExpired: \"Phiên đăng nhập đã hết hạn. Vui lòng đăng nhập lại.\",\r\n    loadErrorGeneric: \"Không thể lấy thông tin người dùng\",\r\n    actionBackToLogin: \"Quay lại đăng nhập\",\r\n    noUser: \"Không tìm thấy dữ liệu người dùng.\",\r\n    hero: {\r\n      fallbackName: \"Người dùng\",\r\n      rolePrefix: \"Vai trò:\",\r\n      balancePrefix: \"Số dư:\",\r\n      balanceSuffix: \"VND\",\r\n    },\r\n    roles: {\r\n      admin: \"Quản trị viên hệ thống\",\r\n      user: \"Khách hàng cá nhân\",\r\n      staff: \"Chuyên viên hỗ trợ\",\r\n    },\r\n    sections: {\r\n      personal: \"Thông tin cá nhân\",\r\n      password: \"Đổi mật khẩu\",\r\n      mfa: \"Bảo mật 2 lớp (MFA)\",\r\n    },\r\n    labels: {\r\n      username: \"Tên người dùng\",\r\n      usernamePlaceholder: \"Nhập tên hiển thị\",\r\n      email: \"Email\",\r\n      emailPlaceholder: \"name@example.com\",\r\n      save: \"Lưu thay đổi\",\r\n      currentPassword: \"Mật khẩu hiện tại\",\r\n      currentPasswordPlaceholder: \"Nhập mật khẩu hiện tại\",\r\n      newPassword: \"Mật khẩu mới\",\r\n      newPasswordPlaceholder: \"Ít nhất 8 ký tự\",\r\n      changePassword: \"Đổi mật khẩu\",\r\n      mfaStatus: \"Trạng thái:\",\r\n      mfaOn: \"Đang bật\",\r\n      mfaOff: \"Đang tắt\",\r\n      toggleMfaOn: \"Tắt MFA\",\r\n      toggleMfaOff: \"Bật nhanh (Email OTP)\",\r\n      setupApp: \"Thiết lập bằng ứng dụng\",\r\n      mfaInstructions:\r\n        \"Quét QR bằng Google Authenticator hoặc nhập secret bên dưới.\",\r\n      secretLabel: \"Secret:\",\r\n      otpLabel: \"Nhập mã 6 số\",\r\n      otpPlaceholder: \"123456\",\r\n      verifyMfa: \"Xác nhận kích hoạt\",\r\n    },\r\n    flash: {\r\n      usernameRequired: \"Tên người dùng không được bỏ trống.\",\r\n      emailInvalid: \"Email không hợp lệ.\",\r\n      saveSuccess: \"Đã lưu thay đổi.\",\r\n      saveFail: \"Cập nhật thất bại.\",\r\n      passwordFields:\r\n        \"Vui lòng nhập đầy đủ mật khẩu hiện tại và mật khẩu mới.\",\r\n      passwordTooShort: \"Mật khẩu mới phải có ít nhất 8 ký tự.\",\r\n      passwordSuccess: \"Đã đổi mật khẩu.\",\r\n      passwordFail: \"Thay đổi mật khẩu thất bại.\",\r\n      mfaToggleOn: \"Đã bật MFA qua email OTP.\",\r\n      mfaToggleOff: \"Đã tắt MFA.\",\r\n      mfaToggleFail: \"Không thể thay đổi MFA.\",\r\n      mfaSetupInit: \"Đã tạo QR / secret. Vui lòng quét và xác thực.\",\r\n      mfaSetupFail: \"Không thể khởi tạo MFA.\",\r\n      mfaTokenRequired:\r\n        \"Nhập mã 6 số từ ứng dụng trước khi xác nhận.\",\r\n      mfaVerifySuccess: \"Đã bật MFA.\",\r\n      mfaVerifyFail: \"Mã xác nhận không đúng.\",\r\n    },\r\n  },\r\n  en: {\r\n    loading: \"Loading profile...\",\r\n    loadErrorMissing: \"User profile not found\",\r\n    sessionExpired: \"Your session has expired. Please sign in again.\",\r\n    loadErrorGeneric: \"Unable to retrieve user information\",\r\n    actionBackToLogin: \"Back to login\",\r\n    noUser: \"User data is unavailable.\",\r\n    hero: {\r\n      fallbackName: \"User\",\r\n      rolePrefix: \"Role:\",\r\n      balancePrefix: \"Balance:\",\r\n      balanceSuffix: \"VND\",\r\n    },\r\n    roles: {\r\n      admin: \"Platform administrator\",\r\n      user: \"Retail customer\",\r\n      staff: \"Support specialist\",\r\n    },\r\n    sections: {\r\n      personal: \"Personal information\",\r\n      password: \"Change password\",\r\n      mfa: \"Multi-factor authentication (MFA)\",\r\n    },\r\n    labels: {\r\n      username: \"Username\",\r\n      usernamePlaceholder: \"Display name\",\r\n      email: \"Email\",\r\n      emailPlaceholder: \"name@example.com\",\r\n      save: \"Save changes\",\r\n      currentPassword: \"Current password\",\r\n      currentPasswordPlaceholder: \"Enter current password\",\r\n      newPassword: \"New password\",\r\n      newPasswordPlaceholder: \"At least 8 characters\",\r\n      changePassword: \"Update password\",\r\n      mfaStatus: \"Status:\",\r\n      mfaOn: \"Enabled\",\r\n      mfaOff: \"Disabled\",\r\n      toggleMfaOn: \"Disable MFA\",\r\n      toggleMfaOff: \"Enable via email OTP\",\r\n      setupApp: \"Set up with authenticator app\",\r\n      mfaInstructions:\r\n        \"Scan the QR with Google Authenticator or enter the secret below.\",\r\n      secretLabel: \"Secret:\",\r\n      otpLabel: \"Enter 6-digit code\",\r\n      otpPlaceholder: \"123456\",\r\n      verifyMfa: \"Confirm activation\",\r\n    },\r\n    flash: {\r\n      usernameRequired: \"Username cannot be empty.\",\r\n      emailInvalid: \"Email is invalid.\",\r\n      saveSuccess: \"Changes saved successfully.\",\r\n      saveFail: \"Update failed.\",\r\n      passwordFields: \"Please fill in both current and new passwords.\",\r\n      passwordTooShort: \"New password must contain at least 8 characters.\",\r\n      passwordSuccess: \"Password updated successfully.\",\r\n      passwordFail: \"Password change failed.\",\r\n      mfaToggleOn: \"Email OTP MFA enabled.\",\r\n      mfaToggleOff: \"MFA has been disabled.\",\r\n      mfaToggleFail: \"Unable to update MFA settings.\",\r\n      mfaSetupInit:\r\n        \"Secret generated. Scan the QR code and complete verification.\",\r\n      mfaSetupFail: \"Unable to initialise MFA.\",\r\n      mfaTokenRequired:\r\n        \"Enter the 6-digit code from your authenticator app first.\",\r\n      mfaVerifySuccess: \"MFA has been enabled.\",\r\n      mfaVerifyFail: \"Verification code is incorrect.\",\r\n    },\r\n  },\r\n};\r\n\r\nconst emailPattern = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n\r\nconst UserProfile = () => {\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [username, setUsername] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [flash, setFlash] = useState(null);\r\n  const [pwCurrent, setPwCurrent] = useState(\"\");\r\n  const [pwNew, setPwNew] = useState(\"\");\r\n  const [mfaEnabled, setMfaEnabled] = useState(false);\r\n  const [mfaQR, setMfaQR] = useState(null);\r\n  const [mfaSecret, setMfaSecret] = useState(\"\");\r\n  const [mfaToken, setMfaToken] = useState(\"\");\r\n  const [savingProfile, setSavingProfile] = useState(false);\r\n  const [changingPw, setChangingPw] = useState(false);\r\n  const [togglingMfa, setTogglingMfa] = useState(false);\r\n  const [setupLoading, setSetupLoading] = useState(false);\r\n  const [verifyingMfa, setVerifyingMfa] = useState(false);\r\n\r\n  const navigate = useNavigate();\r\n  const { language } = usePreferences();\r\n  const text = dictionary[language] || dictionary.vi;\r\n  const locale = language === \"vi\" ? \"vi-VN\" : \"en-US\";\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    (async () => {\r\n      try {\r\n        const res = await api.get(\"/api/auth/me\");\r\n        if (!mounted) return;\r\n        const u = res.data?.user;\r\n        if (!u) {\r\n          setError(text.loadErrorMissing);\r\n          return;\r\n        }\r\n        setUser(u);\r\n        setUsername(u.username || \"\");\r\n        setEmail(u.email || \"\");\r\n        setMfaEnabled(Boolean(u.mfaEnabled));\r\n      } catch (err) {\r\n        const status = err.response?.status;\r\n        if (status === 401 || status === 403) {\r\n          setError(text.sessionExpired);\r\n          navigate(\"/login\", { replace: true });\r\n        } else {\r\n          setError(\r\n            err.response?.data?.error || text.loadErrorGeneric\r\n          );\r\n        }\r\n      } finally {\r\n        if (mounted) setLoading(false);\r\n      }\r\n    })();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [navigate, text.loadErrorMissing, text.sessionExpired, text.loadErrorGeneric]);\r\n\r\n  useEffect(() => {\r\n    if (!flash) return;\r\n    const timer = setTimeout(() => setFlash(null), 4500);\r\n    return () => clearTimeout(timer);\r\n  }, [flash]);\r\n\r\n  const showFlash = (text, tone = \"info\") => setFlash({ text, tone });\r\n\r\n  const initials = useMemo(() => {\r\n    if (!user) return \"U\";\r\n    const source = user.username || user.email || \"User\";\r\n    return source.trim().charAt(0).toUpperCase();\r\n  }, [user]);\r\n\r\n  const saveProfile = async () => {\r\n    if (!username.trim()) {\r\n      showFlash(text.flash.usernameRequired, \"danger\");\r\n      return;\r\n    }\r\n    if (!emailPattern.test(email.trim())) {\r\n      showFlash(text.flash.emailInvalid, \"danger\");\r\n      return;\r\n    }\r\n    setSavingProfile(true);\r\n    try {\r\n      const res = await api.put(\"/api/auth/me\", {\r\n        username: username.trim(),\r\n        email: email.trim(),\r\n      });\r\n      setUser((prev) => ({\r\n        ...prev,\r\n        username: username.trim(),\r\n        email: email.trim(),\r\n      }));\r\n      showFlash(res.data?.message || text.flash.saveSuccess, \"success\");\r\n    } catch (err) {\r\n      showFlash(\r\n        err.response?.data?.error || text.flash.saveFail,\r\n        \"danger\"\r\n      );\r\n    } finally {\r\n      setSavingProfile(false);\r\n    }\r\n  };\r\n\r\n  const changePassword = async () => {\r\n    if (!pwCurrent || !pwNew) {\r\n      showFlash(text.flash.passwordFields, \"danger\");\r\n      return;\r\n    }\r\n    if (pwNew.length < 8) {\r\n      showFlash(text.flash.passwordTooShort, \"danger\");\r\n      return;\r\n    }\r\n    setChangingPw(true);\r\n    try {\r\n      const res = await api.post(\"/api/auth/change-password\", {\r\n        currentPassword: pwCurrent,\r\n        newPassword: pwNew,\r\n      });\r\n      showFlash(res.data?.message || text.flash.passwordSuccess, \"success\");\r\n      setPwCurrent(\"\");\r\n      setPwNew(\"\");\r\n    } catch (err) {\r\n      showFlash(\r\n        err.response?.data?.error || text.flash.passwordFail,\r\n        \"danger\"\r\n      );\r\n    } finally {\r\n      setChangingPw(false);\r\n    }\r\n  };\r\n\r\n  const toggleMfa = async () => {\r\n    setTogglingMfa(true);\r\n    try {\r\n      const res = await api.post(\"/api/auth/mfa/toggle\", {});\r\n      setMfaEnabled(Boolean(res.data?.mfaEnabled));\r\n      setMfaQR(null);\r\n      setMfaSecret(\"\");\r\n      setMfaToken(\"\");\r\n      showFlash(\r\n        res.data?.mfaEnabled\r\n          ? text.flash.mfaToggleOn\r\n          : text.flash.mfaToggleOff,\r\n        \"success\"\r\n      );\r\n    } catch (err) {\r\n      showFlash(\r\n        err.response?.data?.error || text.flash.mfaToggleFail,\r\n        \"danger\"\r\n      );\r\n    } finally {\r\n      setTogglingMfa(false);\r\n    }\r\n  };\r\n\r\n  const setupMfa = async () => {\r\n    setSetupLoading(true);\r\n    try {\r\n      const res = await api.post(\"/api/auth/mfa/setup\", {});\r\n      setMfaQR(res.data?.qr || null);\r\n      setMfaSecret(res.data?.secret || \"\");\r\n      showFlash(text.flash.mfaSetupInit, \"info\");\r\n    } catch (err) {\r\n      showFlash(\r\n        err.response?.data?.error || text.flash.mfaSetupFail,\r\n        \"danger\"\r\n      );\r\n    } finally {\r\n      setSetupLoading(false);\r\n    }\r\n  };\r\n\r\n  const verifyMfa = async () => {\r\n    if (mfaToken.trim().length < 6) {\r\n      showFlash(text.flash.mfaTokenRequired, \"danger\");\r\n      return;\r\n    }\r\n    setVerifyingMfa(true);\r\n    try {\r\n      const res = await api.post(\"/api/auth/mfa/verify\", {\r\n        token: mfaToken.trim(),\r\n      });\r\n      showFlash(res.data?.message || text.flash.mfaVerifySuccess, \"success\");\r\n      setMfaEnabled(true);\r\n      setMfaQR(null);\r\n      setMfaSecret(\"\");\r\n      setMfaToken(\"\");\r\n    } catch (err) {\r\n      showFlash(\r\n        err.response?.data?.error || text.flash.mfaVerifyFail,\r\n        \"danger\"\r\n      );\r\n    } finally {\r\n      setVerifyingMfa(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"card p-4 text-center profile-loading\">\r\n        <Spinner size={28} />\r\n        <span>{text.loading}</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"card p-4 profile-error text-center\">\r\n        <div className=\"alert alert-danger mb-3\">{error}</div>\r\n        <button className=\"btn btn-primary\" onClick={() => navigate(\"/login\")}\r\n        >\r\n          {text.actionBackToLogin}\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"card p-4 text-center\">\r\n        <div className=\"alert alert-warning mb-0\">{text.noUser}</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const balanceDisplay =\r\n    typeof user.balance === \"number\"\r\n      ? user.balance.toLocaleString(locale)\r\n      : Number(user.balance || 0).toLocaleString(locale);\r\n\r\n  const roleLabel =\r\n    text.roles[user.role] || text.roles.user || user.role || \"user\";\r\n\r\n  return (\r\n    <div className=\"profile-page\">\r\n      <div className=\"profile-hero card mb-4\">\r\n        <div className=\"profile-avatar\">{initials}</div>\r\n        <div>\r\n          <h2 className=\"profile-title mb-1\">\r\n            {user.username || text.hero.fallbackName}\r\n          </h2>\r\n          <div className=\"profile-meta\">{user.email}</div>\r\n          <div className=\"profile-meta mt-2\">\r\n            {text.hero.rolePrefix} <strong>{roleLabel}</strong> · {text.hero.balancePrefix}\r\n            <strong> {balanceDisplay} {text.hero.balanceSuffix}</strong>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {flash && (\r\n        <div className={`alert alert-${flash.tone} shadow-sm profile-alert`}>\r\n          {flash.text}\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"row g-4 profile-grid\">\r\n        <div className=\"col-lg-6\">\r\n          <div className=\"card h-100 p-4\">\r\n            <h5 className=\"section-title\">{text.sections.personal}</h5>\r\n            <label className=\"form-label\">{text.labels.username}</label>\r\n            <input\r\n              className=\"form-control mb-3\"\r\n              value={username}\r\n              onChange={(e) => setUsername(e.target.value)}\r\n              placeholder={text.labels.usernamePlaceholder}\r\n            />\r\n            <label className=\"form-label\">{text.labels.email}</label>\r\n            <input\r\n              className=\"form-control mb-4\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              placeholder={text.labels.emailPlaceholder}\r\n            />\r\n            <button\r\n              className=\"btn btn-primary\"\r\n              onClick={saveProfile}\r\n              disabled={savingProfile}\r\n            >\r\n              {savingProfile && <Spinner size={18} />}\r\n              {text.labels.save}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"col-lg-6\">\r\n          <div className=\"card h-100 p-4\">\r\n            <h5 className=\"section-title\">{text.sections.password}</h5>\r\n            <label className=\"form-label\">{text.labels.currentPassword}</label>\r\n            <input\r\n              type=\"password\"\r\n              className=\"form-control mb-3\"\r\n              value={pwCurrent}\r\n              onChange={(e) => setPwCurrent(e.target.value)}\r\n              placeholder={text.labels.currentPasswordPlaceholder}\r\n            />\r\n            <label className=\"form-label\">{text.labels.newPassword}</label>\r\n            <input\r\n              type=\"password\"\r\n              className=\"form-control mb-4\"\r\n              value={pwNew}\r\n              onChange={(e) => setPwNew(e.target.value)}\r\n              placeholder={text.labels.newPasswordPlaceholder}\r\n            />\r\n            <button\r\n              className=\"btn btn-warning text-white\"\r\n              onClick={changePassword}\r\n              disabled={changingPw}\r\n            >\r\n              {changingPw && <Spinner size={18} />}\r\n              {text.labels.changePassword}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"col-12\">\r\n          <div className=\"card p-4\">\r\n            <div className=\"d-flex justify-content-between align-items-start flex-wrap gap-3\">\r\n              <div>\r\n                <h5 className=\"section-title mb-1\">{text.sections.mfa}</h5>\r\n                <div className=\"profile-meta\">\r\n                  {text.labels.mfaStatus}&nbsp;\r\n                  {mfaEnabled ? (\r\n                    <span className=\"badge bg-success\">{text.labels.mfaOn}</span>\r\n                  ) : (\r\n                    <span className=\"badge bg-secondary\">{text.labels.mfaOff}</span>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div className=\"d-flex gap-2\">\r\n                <button\r\n                  className=\"btn btn-outline-secondary\"\r\n                  onClick={toggleMfa}\r\n                  disabled={togglingMfa}\r\n                >\r\n                  {togglingMfa && <Spinner size={18} />}\r\n                  {mfaEnabled ? text.labels.toggleMfaOn : text.labels.toggleMfaOff}\r\n                </button>\r\n                <button\r\n                  className=\"btn btn-outline-primary\"\r\n                  onClick={setupMfa}\r\n                  disabled={setupLoading}\r\n                >\r\n                  {setupLoading && <Spinner size={18} />}\r\n                  {text.labels.setupApp}\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {mfaQR && (\r\n              <div className=\"mfa-setup mt-4\">\r\n                <div className=\"mfa-instructions\">\r\n                  {text.labels.mfaInstructions}\r\n                </div>\r\n                <div className=\"mfa-qr-wrapper\">\r\n                  <img src={mfaQR} alt=\"MFA QR\" />\r\n                  <div className=\"mfa-secret\">\r\n                    <span>{text.labels.secretLabel}</span>\r\n                    <code>{mfaSecret}</code>\r\n                  </div>\r\n                </div>\r\n                <div className=\"mt-3\">\r\n                  <label className=\"form-label\">{text.labels.otpLabel}</label>\r\n                  <input\r\n                    className=\"form-control\"\r\n                    value={mfaToken}\r\n                    onChange={(e) => setMfaToken(e.target.value)}\r\n                    placeholder={text.labels.otpPlaceholder}\r\n                  />\r\n                  <button\r\n                    className=\"btn btn-success mt-3\"\r\n                    onClick={verifyMfa}\r\n                    disabled={verifyingMfa}\r\n                  >\r\n                    {verifyingMfa && <Spinner size={18} />}\r\n                    {text.labels.verifyMfa}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserProfile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}