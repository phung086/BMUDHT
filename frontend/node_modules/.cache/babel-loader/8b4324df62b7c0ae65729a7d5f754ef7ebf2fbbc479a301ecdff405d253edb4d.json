{"ast":null,"code":"import React,{useContext,useEffect,useMemo,useRef,useState}from\"react\";import{Link,useLocation,useNavigate}from\"react-router-dom\";import LogoutConfirmModal from\"./LogoutConfirmModal\";import NotificationContext from\"../context/NotificationContext\";import{usePreferences}from\"../context/PreferencesContext\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const copy={vi:{homeAria:\"Trang chủ\",notificationsAria:\"Thông báo\",profileAria:\"Hồ sơ cá nhân\",authLogin:\"Đăng nhập\",authRegister:\"Tạo tài khoản\",authAdmin:\"Quản trị\",logout:\"Đăng xuất\",accountFallback:\"Tài khoản\",adminAria:\"Bảng quản trị\",themeLabel:\"Chủ đề\",themeUseLight:\"Dùng chế độ sáng\",themeUseDark:\"Dùng chế độ tối\",languageLabel:\"Ngôn ngữ\",languageToggle:\"Switch to English\",brandSubtitle:\"Digital Banking Suite\"},en:{homeAria:\"Home\",notificationsAria:\"Notifications\",profileAria:\"Profile\",authLogin:\"Login\",authRegister:\"Create Account\",authAdmin:\"Admin Portal\",logout:\"Logout\",accountFallback:\"Account\",adminAria:\"Admin Dashboard\",themeLabel:\"Theme\",themeUseLight:\"Use Light Mode\",themeUseDark:\"Use Dark Mode\",languageLabel:\"Language\",languageToggle:\"Chuyển sang Tiếng Việt\",brandSubtitle:\"Digital Banking Suite\"}};const NavBar=()=>{const[showLogout,setShowLogout]=useState(false);const[settingsOpen,setSettingsOpen]=useState(false);const navigate=useNavigate();const location=useLocation();const token=localStorage.getItem(\"token\");const{unreadCount}=useContext(NotificationContext);const{theme,toggleTheme,language,toggleLanguage}=usePreferences();const text=copy[language]||copy.vi;const languageToggleLabel=language===\"vi\"?copy.vi.languageToggle:copy.en.languageToggle;const settingsRef=useRef(null);const tokenPayload=useMemo(()=>{if(!token)return null;try{const[,base64]=token.split(\".\");return JSON.parse(atob(base64));}catch(e){return null;}},[token]);const displayName=useMemo(()=>{var _tokenPayload$email;if(!tokenPayload)return\"\";return tokenPayload.name||tokenPayload.fullName||tokenPayload.username||((_tokenPayload$email=tokenPayload.email)===null||_tokenPayload$email===void 0?void 0:_tokenPayload$email.split(\"@\")[0])||\"\";},[tokenPayload]);const isAdmin=(tokenPayload===null||tokenPayload===void 0?void 0:tokenPayload.role)===\"admin\";const handleLogout=()=>{try{// best-effort call to server to clear refresh cookie\nfetch(\"/api/auth/logout\",{method:\"POST\",credentials:\"include\"}).catch(()=>{});}catch(e){}localStorage.removeItem(\"token\");// set a small flag so the login page can show a toast confirming logout\ntry{localStorage.setItem(\"justLoggedOut\",\"1\");}catch(e){}setShowLogout(false);navigate(\"/login\",{replace:true});};const openLogout=()=>setShowLogout(true);const cancelLogout=()=>setShowLogout(false);const toggleSettings=()=>setSettingsOpen(current=>!current);useEffect(()=>{if(!settingsOpen)return;const handleClickOutside=event=>{if(!settingsRef.current)return;if(!settingsRef.current.contains(event.target)){setSettingsOpen(false);}};document.addEventListener(\"mousedown\",handleClickOutside);return()=>document.removeEventListener(\"mousedown\",handleClickOutside);},[settingsOpen]);const isActive=path=>location.pathname.startsWith(path);return/*#__PURE__*/_jsxs(\"nav\",{className:\"app-navbar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"app-navbar__inner\",children:[/*#__PURE__*/_jsxs(Link,{className:\"app-navbar__brand\",to:!token?\"/\":isAdmin&&location.pathname.startsWith(\"/admin\")?\"/admin\":\"/dashboard\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"app-navbar__logo\",\"aria-hidden\":true,children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-bank2\"})}),/*#__PURE__*/_jsxs(\"span\",{className:\"app-navbar__brand-text\",children:[\"Fintech One\",/*#__PURE__*/_jsx(\"small\",{children:text.brandSubtitle})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"app-navbar__actions\",children:!token?/*#__PURE__*/_jsxs(\"div\",{className:\"app-navbar__auth\",children:[/*#__PURE__*/_jsx(Link,{className:\"app-navbar__link\",to:\"/login\",children:text.authLogin}),/*#__PURE__*/_jsx(Link,{className:\"app-navbar__link\",to:\"/admin\",children:text.authAdmin}),/*#__PURE__*/_jsx(Link,{className:\"app-navbar__cta\",to:\"/register\",children:text.authRegister})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",className:\"app-navbar__icon \".concat(isActive(\"/dashboard\")?\"is-active\":\"\"),\"aria-label\":text.homeAria,children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-house-door\"})}),isAdmin&&/*#__PURE__*/_jsx(Link,{to:\"/admin\",className:\"app-navbar__icon \".concat(isActive(\"/admin\")?\"is-active\":\"\"),\"aria-label\":text.adminAria,children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-shield-lock\"})}),/*#__PURE__*/_jsxs(Link,{to:\"/notifications\",className:\"app-navbar__icon \".concat(isActive(\"/notifications\")?\"is-active\":\"\"),\"aria-label\":text.notificationsAria,children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-bell\"}),unreadCount>0&&/*#__PURE__*/_jsx(\"span\",{className:\"app-navbar__badge\",children:unreadCount>9?\"9+\":unreadCount})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"app-navbar__settings\",ref:settingsRef,children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"app-navbar__icon \".concat(settingsOpen?\"is-active\":\"\"),\"aria-haspopup\":\"true\",\"aria-expanded\":settingsOpen,onClick:toggleSettings,children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-gear\"})}),settingsOpen&&/*#__PURE__*/_jsxs(\"div\",{className:\"app-navbar__menu\",role:\"menu\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"app-navbar__menu-section\",role:\"none\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"app-navbar__menu-label\",children:text.themeLabel}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"app-navbar__menu-item\",onClick:toggleTheme,role:\"menuitem\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-circle-half me-2\",\"aria-hidden\":true}),theme===\"dark\"?text.themeUseLight:text.themeUseDark]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"app-navbar__menu-section\",role:\"none\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"app-navbar__menu-label\",children:text.languageLabel}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"app-navbar__menu-item\",onClick:toggleLanguage,role:\"menuitem\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-translate me-2\",\"aria-hidden\":true}),languageToggleLabel]})]})]})]}),/*#__PURE__*/_jsxs(Link,{to:\"/profile\",className:\"app-navbar__profile \".concat(isActive(\"/profile\")?\"is-active\":\"\"),\"aria-label\":text.profileAria,children:[/*#__PURE__*/_jsx(\"span\",{className:\"app-navbar__avatar\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-person-fill\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"app-navbar__profile-name\",children:displayName||text.accountFallback})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"app-navbar__logout\",type:\"button\",onClick:openLogout,children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-box-arrow-right\",\"aria-hidden\":true}),/*#__PURE__*/_jsx(\"span\",{children:text.logout})]})]})})]}),/*#__PURE__*/_jsx(LogoutConfirmModal,{show:showLogout,onConfirm:handleLogout,onCancel:cancelLogout})]});};export default NavBar;","map":{"version":3,"names":["React","useContext","useEffect","useMemo","useRef","useState","Link","useLocation","useNavigate","LogoutConfirmModal","NotificationContext","usePreferences","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","copy","vi","homeAria","notificationsAria","profileAria","authLogin","authRegister","authAdmin","logout","accountFallback","adminAria","themeLabel","themeUseLight","themeUseDark","languageLabel","languageToggle","brandSubtitle","en","NavBar","showLogout","setShowLogout","settingsOpen","setSettingsOpen","navigate","location","token","localStorage","getItem","unreadCount","theme","toggleTheme","language","toggleLanguage","text","languageToggleLabel","settingsRef","tokenPayload","base64","split","JSON","parse","atob","e","displayName","_tokenPayload$email","name","fullName","username","email","isAdmin","role","handleLogout","fetch","method","credentials","catch","removeItem","setItem","replace","openLogout","cancelLogout","toggleSettings","current","handleClickOutside","event","contains","target","document","addEventListener","removeEventListener","isActive","path","pathname","startsWith","className","children","to","concat","ref","type","onClick","show","onConfirm","onCancel"],"sources":["D:/BMUDHT/frontend/src/components/NavBar.js"],"sourcesContent":["import React, { useContext, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { Link, useLocation, useNavigate } from \"react-router-dom\";\r\nimport LogoutConfirmModal from \"./LogoutConfirmModal\";\r\nimport NotificationContext from \"../context/NotificationContext\";\r\nimport { usePreferences } from \"../context/PreferencesContext\";\r\n\r\nconst copy = {\r\n  vi: {\r\n    homeAria: \"Trang chủ\",\r\n    notificationsAria: \"Thông báo\",\r\n    profileAria: \"Hồ sơ cá nhân\",\r\n    authLogin: \"Đăng nhập\",\r\n    authRegister: \"Tạo tài khoản\",\r\n    authAdmin: \"Quản trị\",\r\n    logout: \"Đăng xuất\",\r\n    accountFallback: \"Tài khoản\",\r\n    adminAria: \"Bảng quản trị\",\r\n    themeLabel: \"Chủ đề\",\r\n    themeUseLight: \"Dùng chế độ sáng\",\r\n    themeUseDark: \"Dùng chế độ tối\",\r\n    languageLabel: \"Ngôn ngữ\",\r\n    languageToggle: \"Switch to English\",\r\n    brandSubtitle: \"Digital Banking Suite\",\r\n  },\r\n  en: {\r\n    homeAria: \"Home\",\r\n    notificationsAria: \"Notifications\",\r\n    profileAria: \"Profile\",\r\n    authLogin: \"Login\",\r\n    authRegister: \"Create Account\",\r\n    authAdmin: \"Admin Portal\",\r\n    logout: \"Logout\",\r\n    accountFallback: \"Account\",\r\n    adminAria: \"Admin Dashboard\",\r\n    themeLabel: \"Theme\",\r\n    themeUseLight: \"Use Light Mode\",\r\n    themeUseDark: \"Use Dark Mode\",\r\n    languageLabel: \"Language\",\r\n    languageToggle: \"Chuyển sang Tiếng Việt\",\r\n    brandSubtitle: \"Digital Banking Suite\",\r\n  },\r\n};\r\n\r\nconst NavBar = () => {\r\n  const [showLogout, setShowLogout] = useState(false);\r\n  const [settingsOpen, setSettingsOpen] = useState(false);\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const token = localStorage.getItem(\"token\");\r\n  const { unreadCount } = useContext(NotificationContext);\r\n  const { theme, toggleTheme, language, toggleLanguage } = usePreferences();\r\n  const text = copy[language] || copy.vi;\r\n  const languageToggleLabel =\r\n    language === \"vi\" ? copy.vi.languageToggle : copy.en.languageToggle;\r\n  const settingsRef = useRef(null);\r\n  const tokenPayload = useMemo(() => {\r\n    if (!token) return null;\r\n    try {\r\n      const [, base64] = token.split(\".\");\r\n      return JSON.parse(atob(base64));\r\n    } catch (e) {\r\n      return null;\r\n    }\r\n  }, [token]);\r\n\r\n  const displayName = useMemo(() => {\r\n    if (!tokenPayload) return \"\";\r\n    return (\r\n      tokenPayload.name ||\r\n      tokenPayload.fullName ||\r\n      tokenPayload.username ||\r\n      tokenPayload.email?.split(\"@\")[0] ||\r\n      \"\"\r\n    );\r\n  }, [tokenPayload]);\r\n\r\n  const isAdmin = tokenPayload?.role === \"admin\";\r\n\r\n  const handleLogout = () => {\r\n    try {\r\n      // best-effort call to server to clear refresh cookie\r\n      fetch(\"/api/auth/logout\", {\r\n        method: \"POST\",\r\n        credentials: \"include\",\r\n      }).catch(() => {});\r\n    } catch (e) {}\r\n    localStorage.removeItem(\"token\");\r\n    // set a small flag so the login page can show a toast confirming logout\r\n    try {\r\n      localStorage.setItem(\"justLoggedOut\", \"1\");\r\n    } catch (e) {}\r\n    setShowLogout(false);\r\n    navigate(\"/login\", { replace: true });\r\n  };\r\n\r\n  const openLogout = () => setShowLogout(true);\r\n  const cancelLogout = () => setShowLogout(false);\r\n\r\n  const toggleSettings = () => setSettingsOpen((current) => !current);\r\n\r\n  useEffect(() => {\r\n    if (!settingsOpen) return;\r\n    const handleClickOutside = (event) => {\r\n      if (!settingsRef.current) return;\r\n      if (!settingsRef.current.contains(event.target)) {\r\n        setSettingsOpen(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, [settingsOpen]);\r\n\r\n  const isActive = (path) => location.pathname.startsWith(path);\r\n\r\n  return (\r\n    <nav className=\"app-navbar\">\r\n      <div className=\"app-navbar__inner\">\r\n        <Link\r\n          className=\"app-navbar__brand\"\r\n          to={\r\n            !token\r\n              ? \"/\"\r\n              : isAdmin && location.pathname.startsWith(\"/admin\")\r\n              ? \"/admin\"\r\n              : \"/dashboard\"\r\n          }\r\n        >\r\n          <span className=\"app-navbar__logo\" aria-hidden>\r\n            <i className=\"bi bi-bank2\"></i>\r\n          </span>\r\n          <span className=\"app-navbar__brand-text\">\r\n            Fintech One\r\n            <small>{text.brandSubtitle}</small>\r\n          </span>\r\n        </Link>\r\n\r\n        <div className=\"app-navbar__actions\">\r\n          {!token ? (\r\n            <div className=\"app-navbar__auth\">\r\n              <Link className=\"app-navbar__link\" to=\"/login\">\r\n                {text.authLogin}\r\n              </Link>\r\n              <Link className=\"app-navbar__link\" to=\"/admin\">\r\n                {text.authAdmin}\r\n              </Link>\r\n              <Link className=\"app-navbar__cta\" to=\"/register\">\r\n                {text.authRegister}\r\n              </Link>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              <Link\r\n                to=\"/dashboard\"\r\n                className={`app-navbar__icon ${\r\n                  isActive(\"/dashboard\") ? \"is-active\" : \"\"\r\n                }`}\r\n                aria-label={text.homeAria}\r\n              >\r\n                <i className=\"bi bi-house-door\"></i>\r\n              </Link>\r\n              {isAdmin && (\r\n                <Link\r\n                  to=\"/admin\"\r\n                  className={`app-navbar__icon ${\r\n                    isActive(\"/admin\") ? \"is-active\" : \"\"\r\n                  }`}\r\n                  aria-label={text.adminAria}\r\n                >\r\n                  <i className=\"bi bi-shield-lock\"></i>\r\n                </Link>\r\n              )}\r\n              <Link\r\n                to=\"/notifications\"\r\n                className={`app-navbar__icon ${\r\n                  isActive(\"/notifications\") ? \"is-active\" : \"\"\r\n                }`}\r\n                aria-label={text.notificationsAria}\r\n              >\r\n                <i className=\"bi bi-bell\"></i>\r\n                {unreadCount > 0 && (\r\n                  <span className=\"app-navbar__badge\">\r\n                    {unreadCount > 9 ? \"9+\" : unreadCount}\r\n                  </span>\r\n                )}\r\n              </Link>\r\n              <div className=\"app-navbar__settings\" ref={settingsRef}>\r\n                <button\r\n                  type=\"button\"\r\n                  className={`app-navbar__icon ${\r\n                    settingsOpen ? \"is-active\" : \"\"\r\n                  }`}\r\n                  aria-haspopup=\"true\"\r\n                  aria-expanded={settingsOpen}\r\n                  onClick={toggleSettings}\r\n                >\r\n                  <i className=\"bi bi-gear\"></i>\r\n                </button>\r\n                {settingsOpen && (\r\n                  <div className=\"app-navbar__menu\" role=\"menu\">\r\n                    <div className=\"app-navbar__menu-section\" role=\"none\">\r\n                      <span className=\"app-navbar__menu-label\">\r\n                        {text.themeLabel}\r\n                      </span>\r\n                      <button\r\n                        type=\"button\"\r\n                        className=\"app-navbar__menu-item\"\r\n                        onClick={toggleTheme}\r\n                        role=\"menuitem\"\r\n                      >\r\n                        <i className=\"bi bi-circle-half me-2\" aria-hidden></i>\r\n                        {theme === \"dark\"\r\n                          ? text.themeUseLight\r\n                          : text.themeUseDark}\r\n                      </button>\r\n                    </div>\r\n                    <div className=\"app-navbar__menu-section\" role=\"none\">\r\n                      <span className=\"app-navbar__menu-label\">\r\n                        {text.languageLabel}\r\n                      </span>\r\n                      <button\r\n                        type=\"button\"\r\n                        className=\"app-navbar__menu-item\"\r\n                        onClick={toggleLanguage}\r\n                        role=\"menuitem\"\r\n                      >\r\n                        <i className=\"bi bi-translate me-2\" aria-hidden></i>\r\n                        {languageToggleLabel}\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <Link\r\n                to=\"/profile\"\r\n                className={`app-navbar__profile ${\r\n                  isActive(\"/profile\") ? \"is-active\" : \"\"\r\n                }`}\r\n                aria-label={text.profileAria}\r\n              >\r\n                <span className=\"app-navbar__avatar\">\r\n                  <i className=\"bi bi-person-fill\"></i>\r\n                </span>\r\n                <span className=\"app-navbar__profile-name\">\r\n                  {displayName || text.accountFallback}\r\n                </span>\r\n              </Link>\r\n              <button\r\n                className=\"app-navbar__logout\"\r\n                type=\"button\"\r\n                onClick={openLogout}\r\n              >\r\n                <i className=\"bi bi-box-arrow-right\" aria-hidden></i>\r\n                <span>{text.logout}</span>\r\n              </button>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n      <LogoutConfirmModal\r\n        show={showLogout}\r\n        onConfirm={handleLogout}\r\n        onCancel={cancelLogout}\r\n      />\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default NavBar;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}