{"ast":null,"code":"export const AUTH_EVENT = \"auth-token-change\";\nconst safeWindow = typeof window !== \"undefined\" ? window : null;\nexport const readToken = () => {\n  if (!safeWindow) return null;\n  try {\n    return safeWindow.localStorage.getItem(\"token\");\n  } catch (error) {\n    return null;\n  }\n};\nexport const broadcastAuthChange = () => {\n  if (!safeWindow) return;\n  try {\n    safeWindow.dispatchEvent(new Event(AUTH_EVENT));\n  } catch (error) {\n    /* no-op */\n  }\n};\nexport const decodeTokenPayload = (token = readToken()) => {\n  if (!token) return null;\n  try {\n    const [, base64] = token.split(\".\");\n    if (!base64) return null;\n    return JSON.parse(atob(base64));\n  } catch (error) {\n    return null;\n  }\n};","map":{"version":3,"names":["AUTH_EVENT","safeWindow","window","readToken","localStorage","getItem","error","broadcastAuthChange","dispatchEvent","Event","decodeTokenPayload","token","base64","split","JSON","parse","atob"],"sources":["D:/BMUDHT/frontend/src/utils/authSignal.js"],"sourcesContent":["export const AUTH_EVENT = \"auth-token-change\";\r\n\r\nconst safeWindow = typeof window !== \"undefined\" ? window : null;\r\n\r\nexport const readToken = () => {\r\n  if (!safeWindow) return null;\r\n  try {\r\n    return safeWindow.localStorage.getItem(\"token\");\r\n  } catch (error) {\r\n    return null;\r\n  }\r\n};\r\n\r\nexport const broadcastAuthChange = () => {\r\n  if (!safeWindow) return;\r\n  try {\r\n    safeWindow.dispatchEvent(new Event(AUTH_EVENT));\r\n  } catch (error) {\r\n    /* no-op */\r\n  }\r\n};\r\n\r\nexport const decodeTokenPayload = (token = readToken()) => {\r\n  if (!token) return null;\r\n  try {\r\n    const [, base64] = token.split(\".\");\r\n    if (!base64) return null;\r\n    return JSON.parse(atob(base64));\r\n  } catch (error) {\r\n    return null;\r\n  }\r\n};\r\n"],"mappings":"AAAA,OAAO,MAAMA,UAAU,GAAG,mBAAmB;AAE7C,MAAMC,UAAU,GAAG,OAAOC,MAAM,KAAK,WAAW,GAAGA,MAAM,GAAG,IAAI;AAEhE,OAAO,MAAMC,SAAS,GAAGA,CAAA,KAAM;EAC7B,IAAI,CAACF,UAAU,EAAE,OAAO,IAAI;EAC5B,IAAI;IACF,OAAOA,UAAU,CAACG,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EACjD,CAAC,CAAC,OAAOC,KAAK,EAAE;IACd,OAAO,IAAI;EACb;AACF,CAAC;AAED,OAAO,MAAMC,mBAAmB,GAAGA,CAAA,KAAM;EACvC,IAAI,CAACN,UAAU,EAAE;EACjB,IAAI;IACFA,UAAU,CAACO,aAAa,CAAC,IAAIC,KAAK,CAACT,UAAU,CAAC,CAAC;EACjD,CAAC,CAAC,OAAOM,KAAK,EAAE;IACd;EAAA;AAEJ,CAAC;AAED,OAAO,MAAMI,kBAAkB,GAAGA,CAACC,KAAK,GAAGR,SAAS,CAAC,CAAC,KAAK;EACzD,IAAI,CAACQ,KAAK,EAAE,OAAO,IAAI;EACvB,IAAI;IACF,MAAM,GAAGC,MAAM,CAAC,GAAGD,KAAK,CAACE,KAAK,CAAC,GAAG,CAAC;IACnC,IAAI,CAACD,MAAM,EAAE,OAAO,IAAI;IACxB,OAAOE,IAAI,CAACC,KAAK,CAACC,IAAI,CAACJ,MAAM,CAAC,CAAC;EACjC,CAAC,CAAC,OAAON,KAAK,EAAE;IACd,OAAO,IAAI;EACb;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}