{"ast":null,"code":"import _objectSpread from\"D:/BMUDHT/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useMemo,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import api from\"../services/api\";import Spinner from\"./Spinner\";import{usePreferences}from\"../context/PreferencesContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const dictionary={vi:{loading:\"Đang tải hồ sơ...\",loadErrorMissing:\"Không tìm thấy hồ sơ người dùng\",sessionExpired:\"Phiên đăng nhập đã hết hạn. Vui lòng đăng nhập lại.\",loadErrorGeneric:\"Không thể lấy thông tin người dùng\",actionBackToLogin:\"Quay lại đăng nhập\",noUser:\"Không tìm thấy dữ liệu người dùng.\",hero:{fallbackName:\"Người dùng\",rolePrefix:\"Vai trò:\",balancePrefix:\"Số dư:\",balanceSuffix:\"VND\"},roles:{admin:\"Quản trị viên hệ thống\",user:\"Khách hàng cá nhân\",staff:\"Chuyên viên hỗ trợ\"},sections:{personal:\"Thông tin cá nhân\",password:\"Đổi mật khẩu\",mfa:\"Bảo mật 2 lớp (MFA)\"},labels:{username:\"Tên người dùng\",usernamePlaceholder:\"Nhập tên hiển thị\",email:\"Email\",emailPlaceholder:\"name@example.com\",save:\"Lưu thay đổi\",currentPassword:\"Mật khẩu hiện tại\",currentPasswordPlaceholder:\"Nhập mật khẩu hiện tại\",newPassword:\"Mật khẩu mới\",newPasswordPlaceholder:\"Ít nhất 8 ký tự\",changePassword:\"Đổi mật khẩu\",mfaStatus:\"Trạng thái:\",mfaOn:\"Đang bật\",mfaOff:\"Đang tắt\",toggleMfaOn:\"Tắt MFA\",toggleMfaOff:\"Bật nhanh (Email OTP)\",setupApp:\"Thiết lập bằng ứng dụng\",mfaInstructions:\"Quét QR bằng Google Authenticator hoặc nhập secret bên dưới.\",secretLabel:\"Secret:\",otpLabel:\"Nhập mã 6 số\",otpPlaceholder:\"123456\",verifyMfa:\"Xác nhận kích hoạt\"},flash:{usernameRequired:\"Tên người dùng không được bỏ trống.\",emailInvalid:\"Email không hợp lệ.\",saveSuccess:\"Đã lưu thay đổi.\",saveFail:\"Cập nhật thất bại.\",passwordFields:\"Vui lòng nhập đầy đủ mật khẩu hiện tại và mật khẩu mới.\",passwordTooShort:\"Mật khẩu mới phải có ít nhất 8 ký tự.\",passwordSuccess:\"Đã đổi mật khẩu.\",passwordFail:\"Thay đổi mật khẩu thất bại.\",mfaToggleOn:\"Đã bật MFA qua email OTP.\",mfaToggleOff:\"Đã tắt MFA.\",mfaToggleFail:\"Không thể thay đổi MFA.\",mfaSetupInit:\"Đã tạo QR / secret. Vui lòng quét và xác thực.\",mfaSetupFail:\"Không thể khởi tạo MFA.\",mfaTokenRequired:\"Nhập mã 6 số từ ứng dụng trước khi xác nhận.\",mfaVerifySuccess:\"Đã bật MFA.\",mfaVerifyFail:\"Mã xác nhận không đúng.\"}},en:{loading:\"Loading profile...\",loadErrorMissing:\"User profile not found\",sessionExpired:\"Your session has expired. Please sign in again.\",loadErrorGeneric:\"Unable to retrieve user information\",actionBackToLogin:\"Back to login\",noUser:\"User data is unavailable.\",hero:{fallbackName:\"User\",rolePrefix:\"Role:\",balancePrefix:\"Balance:\",balanceSuffix:\"VND\"},roles:{admin:\"Platform administrator\",user:\"Retail customer\",staff:\"Support specialist\"},sections:{personal:\"Personal information\",password:\"Change password\",mfa:\"Multi-factor authentication (MFA)\"},labels:{username:\"Username\",usernamePlaceholder:\"Display name\",email:\"Email\",emailPlaceholder:\"name@example.com\",save:\"Save changes\",currentPassword:\"Current password\",currentPasswordPlaceholder:\"Enter current password\",newPassword:\"New password\",newPasswordPlaceholder:\"At least 8 characters\",changePassword:\"Update password\",mfaStatus:\"Status:\",mfaOn:\"Enabled\",mfaOff:\"Disabled\",toggleMfaOn:\"Disable MFA\",toggleMfaOff:\"Enable via email OTP\",setupApp:\"Set up with authenticator app\",mfaInstructions:\"Scan the QR with Google Authenticator or enter the secret below.\",secretLabel:\"Secret:\",otpLabel:\"Enter 6-digit code\",otpPlaceholder:\"123456\",verifyMfa:\"Confirm activation\"},flash:{usernameRequired:\"Username cannot be empty.\",emailInvalid:\"Email is invalid.\",saveSuccess:\"Changes saved successfully.\",saveFail:\"Update failed.\",passwordFields:\"Please fill in both current and new passwords.\",passwordTooShort:\"New password must contain at least 8 characters.\",passwordSuccess:\"Password updated successfully.\",passwordFail:\"Password change failed.\",mfaToggleOn:\"Email OTP MFA enabled.\",mfaToggleOff:\"MFA has been disabled.\",mfaToggleFail:\"Unable to update MFA settings.\",mfaSetupInit:\"Secret generated. Scan the QR code and complete verification.\",mfaSetupFail:\"Unable to initialise MFA.\",mfaTokenRequired:\"Enter the 6-digit code from your authenticator app first.\",mfaVerifySuccess:\"MFA has been enabled.\",mfaVerifyFail:\"Verification code is incorrect.\"}}};const emailPattern=/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;const UserProfile=()=>{const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[username,setUsername]=useState(\"\");const[email,setEmail]=useState(\"\");const[flash,setFlash]=useState(null);const[pwCurrent,setPwCurrent]=useState(\"\");const[pwNew,setPwNew]=useState(\"\");const[mfaEnabled,setMfaEnabled]=useState(false);const[mfaQR,setMfaQR]=useState(null);const[mfaSecret,setMfaSecret]=useState(\"\");const[mfaToken,setMfaToken]=useState(\"\");const[savingProfile,setSavingProfile]=useState(false);const[changingPw,setChangingPw]=useState(false);const[togglingMfa,setTogglingMfa]=useState(false);const[setupLoading,setSetupLoading]=useState(false);const[verifyingMfa,setVerifyingMfa]=useState(false);const navigate=useNavigate();const{language}=usePreferences();const text=dictionary[language]||dictionary.vi;const locale=language===\"vi\"?\"vi-VN\":\"en-US\";useEffect(()=>{let mounted=true;(async()=>{try{var _res$data;const res=await api.get(\"/api/auth/me\");if(!mounted)return;const u=(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.user;if(!u){setError(text.loadErrorMissing);return;}setUser(u);setUsername(u.username||\"\");setEmail(u.email||\"\");setMfaEnabled(Boolean(u.mfaEnabled));}catch(err){var _err$response;const status=(_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.status;if(status===401||status===403){setError(text.sessionExpired);navigate(\"/login\",{replace:true});}else{var _err$response2,_err$response2$data;setError(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.error)||text.loadErrorGeneric);}}finally{if(mounted)setLoading(false);}})();return()=>{mounted=false;};},[navigate,text.loadErrorMissing,text.sessionExpired,text.loadErrorGeneric]);useEffect(()=>{if(!flash)return;const timer=setTimeout(()=>setFlash(null),4500);return()=>clearTimeout(timer);},[flash]);const showFlash=function(text){let tone=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"info\";return setFlash({text,tone});};const initials=useMemo(()=>{if(!user)return\"U\";const source=user.username||user.email||\"User\";return source.trim().charAt(0).toUpperCase();},[user]);const saveProfile=async()=>{if(!username.trim()){showFlash(text.flash.usernameRequired,\"danger\");return;}if(!emailPattern.test(email.trim())){showFlash(text.flash.emailInvalid,\"danger\");return;}setSavingProfile(true);try{var _res$data2;const res=await api.put(\"/api/auth/me\",{username:username.trim(),email:email.trim()});setUser(prev=>_objectSpread(_objectSpread({},prev),{},{username:username.trim(),email:email.trim()}));showFlash(((_res$data2=res.data)===null||_res$data2===void 0?void 0:_res$data2.message)||text.flash.saveSuccess,\"success\");}catch(err){var _err$response3,_err$response3$data;showFlash(((_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.error)||text.flash.saveFail,\"danger\");}finally{setSavingProfile(false);}};const changePassword=async()=>{if(!pwCurrent||!pwNew){showFlash(text.flash.passwordFields,\"danger\");return;}if(pwNew.length<8){showFlash(text.flash.passwordTooShort,\"danger\");return;}setChangingPw(true);try{var _res$data3;const res=await api.post(\"/api/auth/change-password\",{currentPassword:pwCurrent,newPassword:pwNew});showFlash(((_res$data3=res.data)===null||_res$data3===void 0?void 0:_res$data3.message)||text.flash.passwordSuccess,\"success\");setPwCurrent(\"\");setPwNew(\"\");}catch(err){var _err$response4,_err$response4$data;showFlash(((_err$response4=err.response)===null||_err$response4===void 0?void 0:(_err$response4$data=_err$response4.data)===null||_err$response4$data===void 0?void 0:_err$response4$data.error)||text.flash.passwordFail,\"danger\");}finally{setChangingPw(false);}};const toggleMfa=async()=>{setTogglingMfa(true);try{var _res$data4,_res$data5;const res=await api.post(\"/api/auth/mfa/toggle\",{});setMfaEnabled(Boolean((_res$data4=res.data)===null||_res$data4===void 0?void 0:_res$data4.mfaEnabled));setMfaQR(null);setMfaSecret(\"\");setMfaToken(\"\");showFlash((_res$data5=res.data)!==null&&_res$data5!==void 0&&_res$data5.mfaEnabled?text.flash.mfaToggleOn:text.flash.mfaToggleOff,\"success\");}catch(err){var _err$response5,_err$response5$data;showFlash(((_err$response5=err.response)===null||_err$response5===void 0?void 0:(_err$response5$data=_err$response5.data)===null||_err$response5$data===void 0?void 0:_err$response5$data.error)||text.flash.mfaToggleFail,\"danger\");}finally{setTogglingMfa(false);}};const setupMfa=async()=>{setSetupLoading(true);try{var _res$data6,_res$data7;const res=await api.post(\"/api/auth/mfa/setup\",{});setMfaQR(((_res$data6=res.data)===null||_res$data6===void 0?void 0:_res$data6.qr)||null);setMfaSecret(((_res$data7=res.data)===null||_res$data7===void 0?void 0:_res$data7.secret)||\"\");showFlash(text.flash.mfaSetupInit,\"info\");}catch(err){var _err$response6,_err$response6$data;showFlash(((_err$response6=err.response)===null||_err$response6===void 0?void 0:(_err$response6$data=_err$response6.data)===null||_err$response6$data===void 0?void 0:_err$response6$data.error)||text.flash.mfaSetupFail,\"danger\");}finally{setSetupLoading(false);}};const verifyMfa=async()=>{if(mfaToken.trim().length<6){showFlash(text.flash.mfaTokenRequired,\"danger\");return;}setVerifyingMfa(true);try{var _res$data8;const res=await api.post(\"/api/auth/mfa/verify\",{token:mfaToken.trim()});showFlash(((_res$data8=res.data)===null||_res$data8===void 0?void 0:_res$data8.message)||text.flash.mfaVerifySuccess,\"success\");setMfaEnabled(true);setMfaQR(null);setMfaSecret(\"\");setMfaToken(\"\");}catch(err){var _err$response7,_err$response7$data;showFlash(((_err$response7=err.response)===null||_err$response7===void 0?void 0:(_err$response7$data=_err$response7.data)===null||_err$response7$data===void 0?void 0:_err$response7$data.error)||text.flash.mfaVerifyFail,\"danger\");}finally{setVerifyingMfa(false);}};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"card p-4 text-center profile-loading\",children:[/*#__PURE__*/_jsx(Spinner,{size:28}),/*#__PURE__*/_jsx(\"span\",{children:text.loading})]});}if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"card p-4 profile-error text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger mb-3\",children:error}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>navigate(\"/login\"),children:text.actionBackToLogin})]});}if(!user){return/*#__PURE__*/_jsx(\"div\",{className:\"card p-4 text-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-warning mb-0\",children:text.noUser})});}const balanceDisplay=typeof user.balance===\"number\"?user.balance.toLocaleString(locale):Number(user.balance||0).toLocaleString(locale);const roleLabel=text.roles[user.role]||text.roles.user||user.role||\"user\";return/*#__PURE__*/_jsxs(\"div\",{className:\"profile-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-hero card mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-avatar\",children:initials}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"profile-title mb-1\",children:user.username||text.hero.fallbackName}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-meta\",children:user.email}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-meta mt-2\",children:[text.hero.rolePrefix,\" \",/*#__PURE__*/_jsx(\"strong\",{children:roleLabel}),\" \\xB7\",\" \",text.hero.balancePrefix,/*#__PURE__*/_jsxs(\"strong\",{children:[\" \",balanceDisplay,\" \",text.hero.balanceSuffix]})]})]})]}),flash&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-\".concat(flash.tone,\" shadow-sm profile-alert\"),children:flash.text}),/*#__PURE__*/_jsxs(\"div\",{className:\"row g-4 profile-grid\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card h-100 p-4\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"section-title\",children:text.sections.personal}),/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:text.labels.username}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control mb-3\",value:username,onChange:e=>setUsername(e.target.value),placeholder:text.labels.usernamePlaceholder}),/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:text.labels.email}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control mb-4\",value:email,onChange:e=>setEmail(e.target.value),placeholder:text.labels.emailPlaceholder}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",onClick:saveProfile,disabled:savingProfile,children:[savingProfile&&/*#__PURE__*/_jsx(Spinner,{size:18}),text.labels.save]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card h-100 p-4\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"section-title\",children:text.sections.password}),/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:text.labels.currentPassword}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control mb-3\",value:pwCurrent,onChange:e=>setPwCurrent(e.target.value),placeholder:text.labels.currentPasswordPlaceholder}),/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:text.labels.newPassword}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control mb-4\",value:pwNew,onChange:e=>setPwNew(e.target.value),placeholder:text.labels.newPasswordPlaceholder}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-warning text-white\",onClick:changePassword,disabled:changingPw,children:[changingPw&&/*#__PURE__*/_jsx(Spinner,{size:18}),text.labels.changePassword]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-start flex-wrap gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"section-title mb-1\",children:text.sections.mfa}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-meta\",children:[text.labels.mfaStatus,\"\\xA0\",mfaEnabled?/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-success\",children:text.labels.mfaOn}):/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-secondary\",children:text.labels.mfaOff})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-2\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-secondary\",onClick:toggleMfa,disabled:togglingMfa,children:[togglingMfa&&/*#__PURE__*/_jsx(Spinner,{size:18}),mfaEnabled?text.labels.toggleMfaOn:text.labels.toggleMfaOff]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-primary\",onClick:setupMfa,disabled:setupLoading,children:[setupLoading&&/*#__PURE__*/_jsx(Spinner,{size:18}),text.labels.setupApp]})]})]}),mfaQR&&/*#__PURE__*/_jsxs(\"div\",{className:\"mfa-setup mt-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mfa-instructions\",children:text.labels.mfaInstructions}),/*#__PURE__*/_jsxs(\"div\",{className:\"mfa-qr-wrapper\",children:[/*#__PURE__*/_jsx(\"img\",{src:mfaQR,alt:\"MFA QR\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mfa-secret\",children:[/*#__PURE__*/_jsx(\"span\",{children:text.labels.secretLabel}),/*#__PURE__*/_jsx(\"code\",{children:mfaSecret})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:text.labels.otpLabel}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",value:mfaToken,onChange:e=>setMfaToken(e.target.value),placeholder:text.labels.otpPlaceholder}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-success mt-3\",onClick:verifyMfa,disabled:verifyingMfa,children:[verifyingMfa&&/*#__PURE__*/_jsx(Spinner,{size:18}),text.labels.verifyMfa]})]})]})]})})]})]});};export default UserProfile;","map":{"version":3,"names":["React","useEffect","useMemo","useState","useNavigate","api","Spinner","usePreferences","jsx","_jsx","jsxs","_jsxs","dictionary","vi","loading","loadErrorMissing","sessionExpired","loadErrorGeneric","actionBackToLogin","noUser","hero","fallbackName","rolePrefix","balancePrefix","balanceSuffix","roles","admin","user","staff","sections","personal","password","mfa","labels","username","usernamePlaceholder","email","emailPlaceholder","save","currentPassword","currentPasswordPlaceholder","newPassword","newPasswordPlaceholder","changePassword","mfaStatus","mfaOn","mfaOff","toggleMfaOn","toggleMfaOff","setupApp","mfaInstructions","secretLabel","otpLabel","otpPlaceholder","verifyMfa","flash","usernameRequired","emailInvalid","saveSuccess","saveFail","passwordFields","passwordTooShort","passwordSuccess","passwordFail","mfaToggleOn","mfaToggleOff","mfaToggleFail","mfaSetupInit","mfaSetupFail","mfaTokenRequired","mfaVerifySuccess","mfaVerifyFail","en","emailPattern","UserProfile","setUser","setLoading","error","setError","setUsername","setEmail","setFlash","pwCurrent","setPwCurrent","pwNew","setPwNew","mfaEnabled","setMfaEnabled","mfaQR","setMfaQR","mfaSecret","setMfaSecret","mfaToken","setMfaToken","savingProfile","setSavingProfile","changingPw","setChangingPw","togglingMfa","setTogglingMfa","setupLoading","setSetupLoading","verifyingMfa","setVerifyingMfa","navigate","language","text","locale","mounted","_res$data","res","get","u","data","Boolean","err","_err$response","status","response","replace","_err$response2","_err$response2$data","timer","setTimeout","clearTimeout","showFlash","tone","arguments","length","undefined","initials","source","trim","charAt","toUpperCase","saveProfile","test","_res$data2","put","prev","_objectSpread","message","_err$response3","_err$response3$data","_res$data3","post","_err$response4","_err$response4$data","toggleMfa","_res$data4","_res$data5","_err$response5","_err$response5$data","setupMfa","_res$data6","_res$data7","qr","secret","_err$response6","_err$response6$data","_res$data8","token","_err$response7","_err$response7$data","className","children","size","onClick","balanceDisplay","balance","toLocaleString","Number","roleLabel","role","concat","value","onChange","e","target","placeholder","disabled","type","src","alt"],"sources":["D:/BMUDHT/frontend/src/components/UserProfile.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport api from \"../services/api\";\r\nimport Spinner from \"./Spinner\";\r\nimport { usePreferences } from \"../context/PreferencesContext\";\r\n\r\nconst dictionary = {\r\n  vi: {\r\n    loading: \"Đang tải hồ sơ...\",\r\n    loadErrorMissing: \"Không tìm thấy hồ sơ người dùng\",\r\n    sessionExpired: \"Phiên đăng nhập đã hết hạn. Vui lòng đăng nhập lại.\",\r\n    loadErrorGeneric: \"Không thể lấy thông tin người dùng\",\r\n    actionBackToLogin: \"Quay lại đăng nhập\",\r\n    noUser: \"Không tìm thấy dữ liệu người dùng.\",\r\n    hero: {\r\n      fallbackName: \"Người dùng\",\r\n      rolePrefix: \"Vai trò:\",\r\n      balancePrefix: \"Số dư:\",\r\n      balanceSuffix: \"VND\",\r\n    },\r\n    roles: {\r\n      admin: \"Quản trị viên hệ thống\",\r\n      user: \"Khách hàng cá nhân\",\r\n      staff: \"Chuyên viên hỗ trợ\",\r\n    },\r\n    sections: {\r\n      personal: \"Thông tin cá nhân\",\r\n      password: \"Đổi mật khẩu\",\r\n      mfa: \"Bảo mật 2 lớp (MFA)\",\r\n    },\r\n    labels: {\r\n      username: \"Tên người dùng\",\r\n      usernamePlaceholder: \"Nhập tên hiển thị\",\r\n      email: \"Email\",\r\n      emailPlaceholder: \"name@example.com\",\r\n      save: \"Lưu thay đổi\",\r\n      currentPassword: \"Mật khẩu hiện tại\",\r\n      currentPasswordPlaceholder: \"Nhập mật khẩu hiện tại\",\r\n      newPassword: \"Mật khẩu mới\",\r\n      newPasswordPlaceholder: \"Ít nhất 8 ký tự\",\r\n      changePassword: \"Đổi mật khẩu\",\r\n      mfaStatus: \"Trạng thái:\",\r\n      mfaOn: \"Đang bật\",\r\n      mfaOff: \"Đang tắt\",\r\n      toggleMfaOn: \"Tắt MFA\",\r\n      toggleMfaOff: \"Bật nhanh (Email OTP)\",\r\n      setupApp: \"Thiết lập bằng ứng dụng\",\r\n      mfaInstructions:\r\n        \"Quét QR bằng Google Authenticator hoặc nhập secret bên dưới.\",\r\n      secretLabel: \"Secret:\",\r\n      otpLabel: \"Nhập mã 6 số\",\r\n      otpPlaceholder: \"123456\",\r\n      verifyMfa: \"Xác nhận kích hoạt\",\r\n    },\r\n    flash: {\r\n      usernameRequired: \"Tên người dùng không được bỏ trống.\",\r\n      emailInvalid: \"Email không hợp lệ.\",\r\n      saveSuccess: \"Đã lưu thay đổi.\",\r\n      saveFail: \"Cập nhật thất bại.\",\r\n      passwordFields: \"Vui lòng nhập đầy đủ mật khẩu hiện tại và mật khẩu mới.\",\r\n      passwordTooShort: \"Mật khẩu mới phải có ít nhất 8 ký tự.\",\r\n      passwordSuccess: \"Đã đổi mật khẩu.\",\r\n      passwordFail: \"Thay đổi mật khẩu thất bại.\",\r\n      mfaToggleOn: \"Đã bật MFA qua email OTP.\",\r\n      mfaToggleOff: \"Đã tắt MFA.\",\r\n      mfaToggleFail: \"Không thể thay đổi MFA.\",\r\n      mfaSetupInit: \"Đã tạo QR / secret. Vui lòng quét và xác thực.\",\r\n      mfaSetupFail: \"Không thể khởi tạo MFA.\",\r\n      mfaTokenRequired: \"Nhập mã 6 số từ ứng dụng trước khi xác nhận.\",\r\n      mfaVerifySuccess: \"Đã bật MFA.\",\r\n      mfaVerifyFail: \"Mã xác nhận không đúng.\",\r\n    },\r\n  },\r\n  en: {\r\n    loading: \"Loading profile...\",\r\n    loadErrorMissing: \"User profile not found\",\r\n    sessionExpired: \"Your session has expired. Please sign in again.\",\r\n    loadErrorGeneric: \"Unable to retrieve user information\",\r\n    actionBackToLogin: \"Back to login\",\r\n    noUser: \"User data is unavailable.\",\r\n    hero: {\r\n      fallbackName: \"User\",\r\n      rolePrefix: \"Role:\",\r\n      balancePrefix: \"Balance:\",\r\n      balanceSuffix: \"VND\",\r\n    },\r\n    roles: {\r\n      admin: \"Platform administrator\",\r\n      user: \"Retail customer\",\r\n      staff: \"Support specialist\",\r\n    },\r\n    sections: {\r\n      personal: \"Personal information\",\r\n      password: \"Change password\",\r\n      mfa: \"Multi-factor authentication (MFA)\",\r\n    },\r\n    labels: {\r\n      username: \"Username\",\r\n      usernamePlaceholder: \"Display name\",\r\n      email: \"Email\",\r\n      emailPlaceholder: \"name@example.com\",\r\n      save: \"Save changes\",\r\n      currentPassword: \"Current password\",\r\n      currentPasswordPlaceholder: \"Enter current password\",\r\n      newPassword: \"New password\",\r\n      newPasswordPlaceholder: \"At least 8 characters\",\r\n      changePassword: \"Update password\",\r\n      mfaStatus: \"Status:\",\r\n      mfaOn: \"Enabled\",\r\n      mfaOff: \"Disabled\",\r\n      toggleMfaOn: \"Disable MFA\",\r\n      toggleMfaOff: \"Enable via email OTP\",\r\n      setupApp: \"Set up with authenticator app\",\r\n      mfaInstructions:\r\n        \"Scan the QR with Google Authenticator or enter the secret below.\",\r\n      secretLabel: \"Secret:\",\r\n      otpLabel: \"Enter 6-digit code\",\r\n      otpPlaceholder: \"123456\",\r\n      verifyMfa: \"Confirm activation\",\r\n    },\r\n    flash: {\r\n      usernameRequired: \"Username cannot be empty.\",\r\n      emailInvalid: \"Email is invalid.\",\r\n      saveSuccess: \"Changes saved successfully.\",\r\n      saveFail: \"Update failed.\",\r\n      passwordFields: \"Please fill in both current and new passwords.\",\r\n      passwordTooShort: \"New password must contain at least 8 characters.\",\r\n      passwordSuccess: \"Password updated successfully.\",\r\n      passwordFail: \"Password change failed.\",\r\n      mfaToggleOn: \"Email OTP MFA enabled.\",\r\n      mfaToggleOff: \"MFA has been disabled.\",\r\n      mfaToggleFail: \"Unable to update MFA settings.\",\r\n      mfaSetupInit:\r\n        \"Secret generated. Scan the QR code and complete verification.\",\r\n      mfaSetupFail: \"Unable to initialise MFA.\",\r\n      mfaTokenRequired:\r\n        \"Enter the 6-digit code from your authenticator app first.\",\r\n      mfaVerifySuccess: \"MFA has been enabled.\",\r\n      mfaVerifyFail: \"Verification code is incorrect.\",\r\n    },\r\n  },\r\n};\r\n\r\nconst emailPattern = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n\r\nconst UserProfile = () => {\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [username, setUsername] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [flash, setFlash] = useState(null);\r\n  const [pwCurrent, setPwCurrent] = useState(\"\");\r\n  const [pwNew, setPwNew] = useState(\"\");\r\n  const [mfaEnabled, setMfaEnabled] = useState(false);\r\n  const [mfaQR, setMfaQR] = useState(null);\r\n  const [mfaSecret, setMfaSecret] = useState(\"\");\r\n  const [mfaToken, setMfaToken] = useState(\"\");\r\n  const [savingProfile, setSavingProfile] = useState(false);\r\n  const [changingPw, setChangingPw] = useState(false);\r\n  const [togglingMfa, setTogglingMfa] = useState(false);\r\n  const [setupLoading, setSetupLoading] = useState(false);\r\n  const [verifyingMfa, setVerifyingMfa] = useState(false);\r\n\r\n  const navigate = useNavigate();\r\n  const { language } = usePreferences();\r\n  const text = dictionary[language] || dictionary.vi;\r\n  const locale = language === \"vi\" ? \"vi-VN\" : \"en-US\";\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    (async () => {\r\n      try {\r\n        const res = await api.get(\"/api/auth/me\");\r\n        if (!mounted) return;\r\n        const u = res.data?.user;\r\n        if (!u) {\r\n          setError(text.loadErrorMissing);\r\n          return;\r\n        }\r\n        setUser(u);\r\n        setUsername(u.username || \"\");\r\n        setEmail(u.email || \"\");\r\n        setMfaEnabled(Boolean(u.mfaEnabled));\r\n      } catch (err) {\r\n        const status = err.response?.status;\r\n        if (status === 401 || status === 403) {\r\n          setError(text.sessionExpired);\r\n          navigate(\"/login\", { replace: true });\r\n        } else {\r\n          setError(err.response?.data?.error || text.loadErrorGeneric);\r\n        }\r\n      } finally {\r\n        if (mounted) setLoading(false);\r\n      }\r\n    })();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [\r\n    navigate,\r\n    text.loadErrorMissing,\r\n    text.sessionExpired,\r\n    text.loadErrorGeneric,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (!flash) return;\r\n    const timer = setTimeout(() => setFlash(null), 4500);\r\n    return () => clearTimeout(timer);\r\n  }, [flash]);\r\n\r\n  const showFlash = (text, tone = \"info\") => setFlash({ text, tone });\r\n\r\n  const initials = useMemo(() => {\r\n    if (!user) return \"U\";\r\n    const source = user.username || user.email || \"User\";\r\n    return source.trim().charAt(0).toUpperCase();\r\n  }, [user]);\r\n\r\n  const saveProfile = async () => {\r\n    if (!username.trim()) {\r\n      showFlash(text.flash.usernameRequired, \"danger\");\r\n      return;\r\n    }\r\n    if (!emailPattern.test(email.trim())) {\r\n      showFlash(text.flash.emailInvalid, \"danger\");\r\n      return;\r\n    }\r\n    setSavingProfile(true);\r\n    try {\r\n      const res = await api.put(\"/api/auth/me\", {\r\n        username: username.trim(),\r\n        email: email.trim(),\r\n      });\r\n      setUser((prev) => ({\r\n        ...prev,\r\n        username: username.trim(),\r\n        email: email.trim(),\r\n      }));\r\n      showFlash(res.data?.message || text.flash.saveSuccess, \"success\");\r\n    } catch (err) {\r\n      showFlash(err.response?.data?.error || text.flash.saveFail, \"danger\");\r\n    } finally {\r\n      setSavingProfile(false);\r\n    }\r\n  };\r\n\r\n  const changePassword = async () => {\r\n    if (!pwCurrent || !pwNew) {\r\n      showFlash(text.flash.passwordFields, \"danger\");\r\n      return;\r\n    }\r\n    if (pwNew.length < 8) {\r\n      showFlash(text.flash.passwordTooShort, \"danger\");\r\n      return;\r\n    }\r\n    setChangingPw(true);\r\n    try {\r\n      const res = await api.post(\"/api/auth/change-password\", {\r\n        currentPassword: pwCurrent,\r\n        newPassword: pwNew,\r\n      });\r\n      showFlash(res.data?.message || text.flash.passwordSuccess, \"success\");\r\n      setPwCurrent(\"\");\r\n      setPwNew(\"\");\r\n    } catch (err) {\r\n      showFlash(err.response?.data?.error || text.flash.passwordFail, \"danger\");\r\n    } finally {\r\n      setChangingPw(false);\r\n    }\r\n  };\r\n\r\n  const toggleMfa = async () => {\r\n    setTogglingMfa(true);\r\n    try {\r\n      const res = await api.post(\"/api/auth/mfa/toggle\", {});\r\n      setMfaEnabled(Boolean(res.data?.mfaEnabled));\r\n      setMfaQR(null);\r\n      setMfaSecret(\"\");\r\n      setMfaToken(\"\");\r\n      showFlash(\r\n        res.data?.mfaEnabled ? text.flash.mfaToggleOn : text.flash.mfaToggleOff,\r\n        \"success\"\r\n      );\r\n    } catch (err) {\r\n      showFlash(\r\n        err.response?.data?.error || text.flash.mfaToggleFail,\r\n        \"danger\"\r\n      );\r\n    } finally {\r\n      setTogglingMfa(false);\r\n    }\r\n  };\r\n\r\n  const setupMfa = async () => {\r\n    setSetupLoading(true);\r\n    try {\r\n      const res = await api.post(\"/api/auth/mfa/setup\", {});\r\n      setMfaQR(res.data?.qr || null);\r\n      setMfaSecret(res.data?.secret || \"\");\r\n      showFlash(text.flash.mfaSetupInit, \"info\");\r\n    } catch (err) {\r\n      showFlash(err.response?.data?.error || text.flash.mfaSetupFail, \"danger\");\r\n    } finally {\r\n      setSetupLoading(false);\r\n    }\r\n  };\r\n\r\n  const verifyMfa = async () => {\r\n    if (mfaToken.trim().length < 6) {\r\n      showFlash(text.flash.mfaTokenRequired, \"danger\");\r\n      return;\r\n    }\r\n    setVerifyingMfa(true);\r\n    try {\r\n      const res = await api.post(\"/api/auth/mfa/verify\", {\r\n        token: mfaToken.trim(),\r\n      });\r\n      showFlash(res.data?.message || text.flash.mfaVerifySuccess, \"success\");\r\n      setMfaEnabled(true);\r\n      setMfaQR(null);\r\n      setMfaSecret(\"\");\r\n      setMfaToken(\"\");\r\n    } catch (err) {\r\n      showFlash(\r\n        err.response?.data?.error || text.flash.mfaVerifyFail,\r\n        \"danger\"\r\n      );\r\n    } finally {\r\n      setVerifyingMfa(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"card p-4 text-center profile-loading\">\r\n        <Spinner size={28} />\r\n        <span>{text.loading}</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"card p-4 profile-error text-center\">\r\n        <div className=\"alert alert-danger mb-3\">{error}</div>\r\n        <button className=\"btn btn-primary\" onClick={() => navigate(\"/login\")}>\r\n          {text.actionBackToLogin}\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"card p-4 text-center\">\r\n        <div className=\"alert alert-warning mb-0\">{text.noUser}</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const balanceDisplay =\r\n    typeof user.balance === \"number\"\r\n      ? user.balance.toLocaleString(locale)\r\n      : Number(user.balance || 0).toLocaleString(locale);\r\n\r\n  const roleLabel =\r\n    text.roles[user.role] || text.roles.user || user.role || \"user\";\r\n\r\n  return (\r\n    <div className=\"profile-page\">\r\n      <div className=\"profile-hero card mb-4\">\r\n        <div className=\"profile-avatar\">{initials}</div>\r\n        <div>\r\n          <h2 className=\"profile-title mb-1\">\r\n            {user.username || text.hero.fallbackName}\r\n          </h2>\r\n          <div className=\"profile-meta\">{user.email}</div>\r\n          <div className=\"profile-meta mt-2\">\r\n            {text.hero.rolePrefix} <strong>{roleLabel}</strong> ·{\" \"}\r\n            {text.hero.balancePrefix}\r\n            <strong>\r\n              {\" \"}\r\n              {balanceDisplay} {text.hero.balanceSuffix}\r\n            </strong>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {flash && (\r\n        <div className={`alert alert-${flash.tone} shadow-sm profile-alert`}>\r\n          {flash.text}\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"row g-4 profile-grid\">\r\n        <div className=\"col-lg-6\">\r\n          <div className=\"card h-100 p-4\">\r\n            <h5 className=\"section-title\">{text.sections.personal}</h5>\r\n            <label className=\"form-label\">{text.labels.username}</label>\r\n            <input\r\n              className=\"form-control mb-3\"\r\n              value={username}\r\n              onChange={(e) => setUsername(e.target.value)}\r\n              placeholder={text.labels.usernamePlaceholder}\r\n            />\r\n            <label className=\"form-label\">{text.labels.email}</label>\r\n            <input\r\n              className=\"form-control mb-4\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              placeholder={text.labels.emailPlaceholder}\r\n            />\r\n            <button\r\n              className=\"btn btn-primary\"\r\n              onClick={saveProfile}\r\n              disabled={savingProfile}\r\n            >\r\n              {savingProfile && <Spinner size={18} />}\r\n              {text.labels.save}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"col-lg-6\">\r\n          <div className=\"card h-100 p-4\">\r\n            <h5 className=\"section-title\">{text.sections.password}</h5>\r\n            <label className=\"form-label\">{text.labels.currentPassword}</label>\r\n            <input\r\n              type=\"password\"\r\n              className=\"form-control mb-3\"\r\n              value={pwCurrent}\r\n              onChange={(e) => setPwCurrent(e.target.value)}\r\n              placeholder={text.labels.currentPasswordPlaceholder}\r\n            />\r\n            <label className=\"form-label\">{text.labels.newPassword}</label>\r\n            <input\r\n              type=\"password\"\r\n              className=\"form-control mb-4\"\r\n              value={pwNew}\r\n              onChange={(e) => setPwNew(e.target.value)}\r\n              placeholder={text.labels.newPasswordPlaceholder}\r\n            />\r\n            <button\r\n              className=\"btn btn-warning text-white\"\r\n              onClick={changePassword}\r\n              disabled={changingPw}\r\n            >\r\n              {changingPw && <Spinner size={18} />}\r\n              {text.labels.changePassword}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"col-12\">\r\n          <div className=\"card p-4\">\r\n            <div className=\"d-flex justify-content-between align-items-start flex-wrap gap-3\">\r\n              <div>\r\n                <h5 className=\"section-title mb-1\">{text.sections.mfa}</h5>\r\n                <div className=\"profile-meta\">\r\n                  {text.labels.mfaStatus}&nbsp;\r\n                  {mfaEnabled ? (\r\n                    <span className=\"badge bg-success\">\r\n                      {text.labels.mfaOn}\r\n                    </span>\r\n                  ) : (\r\n                    <span className=\"badge bg-secondary\">\r\n                      {text.labels.mfaOff}\r\n                    </span>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div className=\"d-flex gap-2\">\r\n                <button\r\n                  className=\"btn btn-outline-secondary\"\r\n                  onClick={toggleMfa}\r\n                  disabled={togglingMfa}\r\n                >\r\n                  {togglingMfa && <Spinner size={18} />}\r\n                  {mfaEnabled\r\n                    ? text.labels.toggleMfaOn\r\n                    : text.labels.toggleMfaOff}\r\n                </button>\r\n                <button\r\n                  className=\"btn btn-outline-primary\"\r\n                  onClick={setupMfa}\r\n                  disabled={setupLoading}\r\n                >\r\n                  {setupLoading && <Spinner size={18} />}\r\n                  {text.labels.setupApp}\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {mfaQR && (\r\n              <div className=\"mfa-setup mt-4\">\r\n                <div className=\"mfa-instructions\">\r\n                  {text.labels.mfaInstructions}\r\n                </div>\r\n                <div className=\"mfa-qr-wrapper\">\r\n                  <img src={mfaQR} alt=\"MFA QR\" />\r\n                  <div className=\"mfa-secret\">\r\n                    <span>{text.labels.secretLabel}</span>\r\n                    <code>{mfaSecret}</code>\r\n                  </div>\r\n                </div>\r\n                <div className=\"mt-3\">\r\n                  <label className=\"form-label\">{text.labels.otpLabel}</label>\r\n                  <input\r\n                    className=\"form-control\"\r\n                    value={mfaToken}\r\n                    onChange={(e) => setMfaToken(e.target.value)}\r\n                    placeholder={text.labels.otpPlaceholder}\r\n                  />\r\n                  <button\r\n                    className=\"btn btn-success mt-3\"\r\n                    onClick={verifyMfa}\r\n                    disabled={verifyingMfa}\r\n                  >\r\n                    {verifyingMfa && <Spinner size={18} />}\r\n                    {text.labels.verifyMfa}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserProfile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}